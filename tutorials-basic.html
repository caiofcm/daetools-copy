<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>8.1. Basic Tutorials &#8212; DAE Tools 1.9.0 documentation</title>
    
    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootswatch-3.3.6/readable/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.9.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <link rel="shortcut icon" href="_static/[d][a][e].ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="8.2. Advanced Tutorials" href="tutorials-advanced.html" />
    <link rel="prev" title="8. Tutorials" href="tutorials.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body role="document">

  <div id="navbar" class="navbar navbar-inverse navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html"><span><img src="_static/[d][a][e]_Tools_project.png"></span>
          DAE Tools</a>
        <span class="navbar-text navbar-version pull-left"><b>1.9.0</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="/">Home</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="paradigms.html">2. Programming Paradigms</a></li>
<li class="toctree-l1"><a class="reference internal" href="architecture.html">3. Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_daetools.html">4. Getting DAE Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">5. Getting Started with DAE Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="pyDAE_user_guide.html">6. User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="pyDAE_api_ref.html">7. API Reference</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="tutorials.html">8. Tutorials</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">8.1. Basic Tutorials</a><ul>
<li><a class="reference internal" href="#module-daetools.examples.whats_the_time">8.1.1. What&#8217;s the time? (AKA: Hello world!)</a></li>
<li><a class="reference internal" href="#module-daetools.examples.tutorial1">8.1.2. Tutorial 1</a></li>
<li><a class="reference internal" href="#module-daetools.examples.tutorial2">8.1.3. Tutorial 2</a></li>
<li><a class="reference internal" href="#module-daetools.examples.tutorial3">8.1.4. Tutorial 3</a></li>
<li><a class="reference internal" href="#module-daetools.examples.tutorial4">8.1.5. Tutorial 4</a></li>
<li><a class="reference internal" href="#module-daetools.examples.tutorial5">8.1.6. Tutorial 5</a></li>
<li><a class="reference internal" href="#module-daetools.examples.tutorial6">8.1.7. Tutorial 6</a></li>
<li><a class="reference internal" href="#module-daetools.examples.tutorial7">8.1.8. Tutorial 7</a></li>
<li><a class="reference internal" href="#module-daetools.examples.tutorial8">8.1.9. Tutorial 8</a></li>
<li><a class="reference internal" href="#module-daetools.examples.tutorial9">8.1.10. Tutorial 9</a></li>
<li><a class="reference internal" href="#module-daetools.examples.tutorial10">8.1.11. Tutorial 10</a></li>
<li><a class="reference internal" href="#module-daetools.examples.tutorial11">8.1.12. Tutorial 11</a></li>
<li><a class="reference internal" href="#module-daetools.examples.tutorial12">8.1.13. Tutorial 12</a></li>
<li><a class="reference internal" href="#module-daetools.examples.tutorial13">8.1.14. Tutorial 13</a></li>
<li><a class="reference internal" href="#module-daetools.examples.tutorial14">8.1.15. Tutorial 14</a></li>
<li><a class="reference internal" href="#module-daetools.examples.tutorial15">8.1.16. Tutorial 15</a></li>
<li><a class="reference internal" href="#module-daetools.examples.tutorial16">8.1.17. Tutorial 16</a></li>
<li><a class="reference internal" href="#module-daetools.examples.tutorial17">8.1.18. Tutorial 17</a></li>
<li><a class="reference internal" href="#module-daetools.examples.tutorial18">8.1.19. Tutorial 18</a></li>
<li><a class="reference internal" href="#module-daetools.examples.tutorial19">8.1.20. Tutorial 19</a></li>
<li><a class="reference internal" href="#module-daetools.examples.tutorial20">8.1.21. Tutorial 20</a></li>
<li><a class="reference internal" href="#module-daetools.examples.tutorial21">8.1.22. Tutorial 21</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="basic-tutorials">
<h1>8.1. Basic Tutorials<a class="headerlink" href="#basic-tutorials" title="Permalink to this headline">Â¶</a></h1>
<p class="rubric">The key modelling concepts in <strong>DAE Tools</strong>:</p>
<table border="1" class="docutils">
<colgroup>
<col width="26%" />
<col width="74%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="tutorials-all.html#whats-the-time"><span class="std std-ref">What&#8217;s the time? (AKA: Hello world!)</span></a></td>
<td>Importing DAE Tools pyDAE module(s), units and variable types
developing models, setting up a simulation, declaring auxiliary
objects (DAE solver, data reporter, log), simulation run-time
options, running a smulation.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="tutorials-all.html#tutorial1"><span class="std std-ref">Tutorial 1</span></a></td>
<td>Using distribution domains, distributing parameters/variables/equations on domains,
using derivative functions (dt, d, d2), setting boundary and initial conditions.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="tutorials-all.html#tutorial2"><span class="std std-ref">Tutorial 2</span></a></td>
<td>Using arrays (discrete distribution domains), specifying degrees of freedom, setting initial guesses.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="tutorials-all.html#tutorial3"><span class="std std-ref">Tutorial 3</span></a></td>
<td>Declaring arrays of variable values (Array function) and using functions that operate on them arrays,
using the Constant function, making non-uniform grids.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="tutorials-all.html#tutorial6"><span class="std std-ref">Tutorial 6</span></a></td>
<td>Using ports, making port connections, declaring components (instances of other models).</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="tutorials-all.html#tutorial10"><span class="std std-ref">Tutorial 10</span></a></td>
<td>Saving and restoring initialisation files, evaluating integrals.</td>
</tr>
</tbody>
</table>
<p class="rubric">Support for discrete systems:</p>
<table border="1" class="docutils">
<colgroup>
<col width="26%" />
<col width="74%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="tutorials-all.html#tutorial4"><span class="std std-ref">Tutorial 4</span></a></td>
<td>Declaring discontinuous equations (symmetrical state transition networks: daeIF statements).</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="tutorials-all.html#tutorial5"><span class="std std-ref">Tutorial 5</span></a></td>
<td>Declaring discontinuous equations (non-symmetrical state transition networks: daeSTN statements).</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="tutorials-all.html#tutorial13"><span class="std std-ref">Tutorial 13</span></a></td>
<td>Using event ports, handling events using ON_CONDITION() and ON_EVENT() functions,
and declaring user defined actions.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="tutorials-all.html#tutorial15"><span class="std std-ref">Tutorial 15</span></a></td>
<td>Declaring nested state transitions.</td>
</tr>
</tbody>
</table>
<p class="rubric">The simulation options:</p>
<table border="1" class="docutils">
<colgroup>
<col width="26%" />
<col width="74%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="tutorials-all.html#tutorial7"><span class="std std-ref">Tutorial 7</span></a></td>
<td>Making user-defined schedules (operating procedures), resetting the values of degrees of freedom and
resetting initial conditions.</td>
</tr>
</tbody>
</table>
<p class="rubric">Data reporting:</p>
<table border="1" class="docutils">
<colgroup>
<col width="26%" />
<col width="74%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="tutorials-all.html#tutorial8"><span class="std std-ref">Tutorial 8</span></a></td>
<td>Using data reporters to write the results into files (Matlab, MS Excel, JSON, XML, HDF5, VTK, Pandas),
developing custom data reporters.</td>
</tr>
</tbody>
</table>
<p class="rubric">DAE and LA solvers:</p>
<table border="1" class="docutils">
<colgroup>
<col width="26%" />
<col width="74%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="tutorials-all.html#tutorial9"><span class="std std-ref">Tutorial 9</span></a></td>
<td>Using available linear equations solvers (SuperLU, SuperLU_MT, Trilinos Amesos, IntelPardiso, Pardiso).</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="tutorials-all.html#tutorial11"><span class="std std-ref">Tutorial 11</span></a></td>
<td>Using iterative linear equations solvers (Trilinos AztecOO) and preconditioners
(built-in AztecOO, Ifpack, ML).</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="tutorials-all.html#tutorial12"><span class="std std-ref">Tutorial 12</span></a></td>
<td>Using SuperLU and SuperLU_MT solvers and their options.</td>
</tr>
</tbody>
</table>
<p class="rubric">External functions:</p>
<table border="1" class="docutils">
<colgroup>
<col width="26%" />
<col width="74%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="tutorials-all.html#tutorial14"><span class="std std-ref">Tutorial 14</span></a></td>
<td>Declaring and using external functions.</td>
</tr>
</tbody>
</table>
<p class="rubric">Logging:</p>
<table border="1" class="docutils">
<colgroup>
<col width="26%" />
<col width="74%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="tutorials-all.html#tutorial17"><span class="std std-ref">Tutorial 17</span></a></td>
<td>Using TCPIP Log and TCPIPLogServer.</td>
</tr>
</tbody>
</table>
<p class="rubric">Interoperability with NumPy:</p>
<table border="1" class="docutils">
<colgroup>
<col width="26%" />
<col width="74%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="tutorials-all.html#tutorial16"><span class="std std-ref">Tutorial 16</span></a></td>
<td>Using DAE Tools variables and NumPy functions to solve a simple stationary 1D heat conduction
by manually assembling Finite Element stiffness matrix and load vector.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="tutorials-all.html#tutorial18"><span class="std std-ref">Tutorial 18</span></a></td>
<td>Using DAE Tools variables and NumPy functions to generate and solve a simple ODE system.</td>
</tr>
</tbody>
</table>
<p class="rubric">Thermophysical property packages:</p>
<table border="1" class="docutils">
<colgroup>
<col width="26%" />
<col width="74%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="tutorials-all.html#tutorial19"><span class="std std-ref">Tutorial 19</span></a></td>
<td>Using thermophysical property packages in DAE Tools.</td>
</tr>
</tbody>
</table>
<p class="rubric">Variable constraints:</p>
<table border="1" class="docutils">
<colgroup>
<col width="26%" />
<col width="74%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="tutorials-all.html#tutorial20"><span class="std std-ref">Tutorial 20</span></a></td>
<td>Specifying variable constraints in DAE Tools.</td>
</tr>
</tbody>
</table>
<p class="rubric">Equation evaluation modes:</p>
<table border="1" class="docutils">
<colgroup>
<col width="26%" />
<col width="74%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="tutorials-all.html#tutorial21"><span class="std std-ref">Tutorial 21</span></a></td>
<td>Specifying different equation evaluation modes and evaluators.</td>
</tr>
</tbody>
</table>
<div class="section" id="module-daetools.examples.whats_the_time">
<span id="what-s-the-time-aka-hello-world"></span><span id="whats-the-time"></span><h2>8.1.1. What&#8217;s the time? (AKA: Hello world!)<a class="headerlink" href="#module-daetools.examples.whats_the_time" title="Permalink to this headline">Â¶</a></h2>
<p>What is the time? (AKA Hello world!) is a very simple model. The model consists of
a single variable (called &#8216;time&#8217;) and a single differential equation:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">d</span><span class="p">(</span><span class="n">time</span><span class="p">)</span><span class="o">/</span><span class="n">dt</span> <span class="o">=</span> <span class="mi">1</span>
</pre></div>
</div>
<p>This way, the value of the variable &#8216;time&#8217; is equal to the elapsed time in the
simulation at any moment.</p>
<p>This tutorial presents the basic structure of daeModel and daeSimulation classes.
A typical DAETools simulation requires the following 8 tasks:</p>
<ol class="arabic simple">
<li>Importing DAE Tools pyDAE module(s)</li>
<li>Importing or declaration of units and variable types
(unit and daeVariableType classes)</li>
<li>Developing a model by deriving a class from the base daeModel class and:<ul>
<li>Declaring domains, parameters and variables in the daeModel.__init__ function</li>
<li>Declaring equations and their residual expressions in the
daeModel.DeclareEquations function</li>
</ul>
</li>
<li>Setting up a simulation by deriving a class from the base daeSimulation class and:<ul>
<li>Specifying a model to be used in the simulation in the daeSimulation.__init__ function</li>
<li>Setting the values of parameters in the daeSimulation.SetUpParametersAndDomains function</li>
<li>Setting initial conditions in the daeSimulation.SetUpVariables function</li>
</ul>
</li>
<li>Declaring auxiliary objects required for the simulation<ul>
<li>DAE solver object</li>
<li>Data reporter object</li>
<li>Log object</li>
</ul>
</li>
<li>Setting the run-time options for the simulation:<ul>
<li>ReportingInterval</li>
<li>TimeHorizon</li>
</ul>
</li>
<li>Connecting a data reporter</li>
<li>Initializing, running and finalizing the simulation</li>
</ol>
<p>The &#8216;time&#8217; variable plot:</p>
<a class="reference internal image-reference" href="_images/whats_the_time-results.png"><img alt="_images/whats_the_time-results.png" src="_images/whats_the_time-results.png" style="width: 500px;" /></a>
<p class="rubric">Files</p>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="76%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Model report</td>
<td><a class="reference external" href="./examples/whats_the_time.xml">whats_the_time.xml</a></td>
</tr>
<tr class="row-even"><td>Runtime model report</td>
<td><a class="reference external" href="./examples/whats_the_time-rt.xml">whats_the_time-rt.xml</a></td>
</tr>
<tr class="row-odd"><td>Source code</td>
<td><a class="reference external" href="./examples/whats_the_time.html">whats_the_time.py</a></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-daetools.examples.tutorial1">
<span id="tutorial-1"></span><span id="tutorial1"></span><h2>8.1.2. Tutorial 1<a class="headerlink" href="#module-daetools.examples.tutorial1" title="Permalink to this headline">Â¶</a></h2>
<p>This tutorial introduces several new concepts:</p>
<ul class="simple">
<li>Distribution domains</li>
<li>Distributed parameters, variables and equations</li>
<li>Setting boundary conditions (Neumann and Dirichlet type)</li>
<li>Setting initial conditions</li>
</ul>
<p>In this example we model a simple heat conduction problem: a conduction through
a very thin, rectangular copper plate.</p>
<p>For this problem, we need a two-dimensional Cartesian grid (x,y)
(here, for simplicity, divided into 10 x 10 segments):</p>
<div class="highlight-none"><div class="highlight"><pre><span></span> y axis
    ^
    |
Ly -| L T T T T T T T T T R
    | L + + + + + + + + + R
    | L + + + + + + + + + R
    | L + + + + + + + + + R
    | L + + + + + + + + + R
    | L + + + + + + + + + R
    | L + + + + + + + + + R
    | L + + + + + + + + + R
    | L + + + + + + + + + R
    | L + + + + + + + + + R
 0 -| L B B B B B B B B B R
    --|-------------------|-------&gt; x axis
      0                   Lx
</pre></div>
</div>
<p>Points &#8216;B&#8217; at the bottom edge of the plate (for y = 0), and the points &#8216;T&#8217; at the
top edge of the plate (for y = Ly) represent the points where the heat is applied.</p>
<p>The plate is considered insulated at the left (x = 0) and the right edges (x = Lx)
of the plate (points &#8216;L&#8217; and &#8216;R&#8217;). To model this type of problem, we have to write
a heat balance equation for all interior points except the left, right, top and
bottom edges, where we need to specify boundary conditions.</p>
<p>In this problem we have to define two distribution domains:</p>
<ul class="simple">
<li>x (x axis, length Lx = 0.1 m)</li>
<li>y (y axis, length Ly = 0.1 m)</li>
</ul>
<p>the following parameters:</p>
<ul class="simple">
<li>rho: copper density, 8960 kg/m3</li>
<li>cp:  copper specific heat capacity, 385 J/(kgK)</li>
<li>k:   copper heat conductivity, 401 W/(mK)</li>
<li>Qb:  heat flux at the bottom edge, 1E6 W/m2 (or 100 W/cm2)</li>
<li>Tt:  temperature at the top edge, 300 K</li>
</ul>
<p>and a single variable:</p>
<ul class="simple">
<li>T: the temperature of the plate (distributed on x and y domains)</li>
</ul>
<p>The model consists of 5 equations (1 distributed equation + 4 boundary conditions):</p>
<ol class="arabic">
<li><p class="first">Heat balance:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">rho</span> <span class="o">*</span> <span class="n">cp</span> <span class="o">*</span> <span class="n">dT</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span><span class="o">/</span><span class="n">dt</span> <span class="o">=</span> <span class="n">k</span> <span class="o">*</span> <span class="p">[</span><span class="n">d2T</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span><span class="o">/</span><span class="n">dx2</span> <span class="o">+</span> <span class="n">d2T</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span><span class="o">/</span><span class="n">dy2</span><span class="p">];</span>  <span class="n">x</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">Lx</span><span class="p">),</span> <span class="n">y</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">Ly</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">Neumann boundary conditions at the bottom edge:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">-</span><span class="n">k</span> <span class="o">*</span> <span class="n">dT</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span><span class="o">/</span><span class="n">dy</span> <span class="o">=</span> <span class="n">Qb</span><span class="p">;</span>  <span class="n">x</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">Lx</span><span class="p">),</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span>
</pre></div>
</div>
</li>
<li><p class="first">Dirichlet boundary conditions at the top edge:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">T</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span> <span class="o">=</span> <span class="n">Tt</span><span class="p">;</span>  <span class="n">x</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">Lx</span><span class="p">),</span> <span class="n">y</span> <span class="o">=</span> <span class="n">Ly</span>
</pre></div>
</div>
</li>
<li><p class="first">Neumann boundary conditions at the left edge (insulated):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">dT</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span><span class="o">/</span><span class="n">dx</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>  <span class="n">y</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">Ly</span><span class="p">],</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
</pre></div>
</div>
</li>
<li><p class="first">Neumann boundary conditions at the right edge (insulated):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">dT</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span><span class="o">/</span><span class="n">dx</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>  <span class="n">y</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">Ly</span><span class="p">],</span> <span class="n">x</span> <span class="o">=</span> <span class="n">Lx</span>
</pre></div>
</div>
</li>
</ol>
<p>The temperature plot (at t=100s, x=0.5, y=*):</p>
<a class="reference internal image-reference" href="_images/tutorial1-results.png"><img alt="_images/tutorial1-results.png" src="_images/tutorial1-results.png" style="width: 500px;" /></a>
<p class="rubric">Files</p>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="76%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Model report</td>
<td><a class="reference external" href="./examples/tutorial1.xml">tutorial1.xml</a></td>
</tr>
<tr class="row-even"><td>Runtime model report</td>
<td><a class="reference external" href="./examples/tutorial1-rt.xml">tutorial1-rt.xml</a></td>
</tr>
<tr class="row-odd"><td>Source code</td>
<td><a class="reference external" href="./examples/tutorial1.html">tutorial1.py</a></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-daetools.examples.tutorial2">
<span id="tutorial-2"></span><span id="tutorial2"></span><h2>8.1.3. Tutorial 2<a class="headerlink" href="#module-daetools.examples.tutorial2" title="Permalink to this headline">Â¶</a></h2>
<p>This tutorial introduces the following concepts:</p>
<ul class="simple">
<li>Arrays (discrete distribution domains)</li>
<li>Distributed parameters</li>
<li>Making equations more readable</li>
<li>Degrees of freedom</li>
<li>Setting an initial guess for variables (used by a DAE solver during an initial phase)</li>
<li>Print DAE solver statistics</li>
</ul>
<p>The model in this example is very similar to the model used in the tutorial 1.
The differences are:</p>
<ul class="simple">
<li>The heat capacity is temperature dependent</li>
<li>Different boundary conditions are applied</li>
</ul>
<p>The temperature plot (at t=100s, x=0.5, y=*):</p>
<a class="reference internal image-reference" href="_images/tutorial2-results.png"><img alt="_images/tutorial2-results.png" src="_images/tutorial2-results.png" style="width: 500px;" /></a>
<p class="rubric">Files</p>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="76%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Model report</td>
<td><a class="reference external" href="./examples/tutorial2.xml">tutorial2.xml</a></td>
</tr>
<tr class="row-even"><td>Runtime model report</td>
<td><a class="reference external" href="./examples/tutorial2-rt.xml">tutorial2-rt.xml</a></td>
</tr>
<tr class="row-odd"><td>Source code</td>
<td><a class="reference external" href="./examples/tutorial2.html">tutorial2.py</a></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-daetools.examples.tutorial3">
<span id="tutorial-3"></span><span id="tutorial3"></span><h2>8.1.4. Tutorial 3<a class="headerlink" href="#module-daetools.examples.tutorial3" title="Permalink to this headline">Â¶</a></h2>
<p>This tutorial introduces the following concepts:</p>
<ul class="simple">
<li>Arrays of variable values</li>
<li>Functions that operate on arrays of values</li>
<li>Functions that create constants and arrays of constant values (Constant and Array)</li>
<li>Non-uniform domain grids</li>
</ul>
<p>The model in this example is identical to the model used in the tutorial 1.
Some additional equations that calculate the total flux at the bottom edge are added
to illustrate the array functions.</p>
<p>The temperature plot (at t=100, x=0.5, y=*):</p>
<a class="reference internal image-reference" href="_images/tutorial3-results.png"><img alt="_images/tutorial3-results.png" src="_images/tutorial3-results.png" style="width: 500px;" /></a>
<p>The average temperature plot (considering the whole x-y domain):</p>
<a class="reference internal image-reference" href="_images/tutorial3-results2.png"><img alt="_images/tutorial3-results2.png" src="_images/tutorial3-results2.png" style="width: 500px;" /></a>
<p class="rubric">Files</p>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="76%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Model report</td>
<td><a class="reference external" href="./examples/tutorial3.xml">tutorial3.xml</a></td>
</tr>
<tr class="row-even"><td>Runtime model report</td>
<td><a class="reference external" href="./examples/tutorial3-rt.xml">tutorial3-rt.xml</a></td>
</tr>
<tr class="row-odd"><td>Source code</td>
<td><a class="reference external" href="./examples/tutorial3.html">tutorial3.py</a></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-daetools.examples.tutorial4">
<span id="tutorial-4"></span><span id="tutorial4"></span><h2>8.1.5. Tutorial 4<a class="headerlink" href="#module-daetools.examples.tutorial4" title="Permalink to this headline">Â¶</a></h2>
<p>This tutorial introduces the following concepts:</p>
<ul class="simple">
<li>Discontinuous equations (symmetrical state transition networks: daeIF statements)</li>
<li>Building of Jacobian expressions</li>
</ul>
<p>In this example we model a very simple heat transfer problem where a small piece of copper
is at one side exposed to the source of heat and at the other to the surroundings.</p>
<p>The lumped heat balance is given by the following equation:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">rho</span> <span class="o">*</span> <span class="n">cp</span> <span class="o">*</span> <span class="n">dT</span><span class="o">/</span><span class="n">dt</span> <span class="o">-</span> <span class="n">Qin</span> <span class="o">=</span> <span class="n">h</span> <span class="o">*</span> <span class="n">A</span> <span class="o">*</span> <span class="p">(</span><span class="n">T</span> <span class="o">-</span> <span class="n">Tsurr</span><span class="p">)</span>
</pre></div>
</div>
<p>where Qin is the power of the heater, h is the heat transfer coefficient,
A is the surface area and Tsurr is the temperature of the surrounding air.</p>
<p>The process starts at the temperature of the metal of 283K.
The metal is allowed to warm up for 200 seconds, when the heat source is
removed and the metal cools down slowly to the ambient temperature.</p>
<p>This can be modelled using the following symmetrical state transition network:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>IF t &lt; 200
  Qin = 1500 W
ELSE
  Qin = 0 W
</pre></div>
</div>
<p>The temperature plot:</p>
<a class="reference internal image-reference" href="_images/tutorial4-results.png"><img alt="_images/tutorial4-results.png" src="_images/tutorial4-results.png" style="width: 500px;" /></a>
<p class="rubric">Files</p>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="76%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Model report</td>
<td><a class="reference external" href="./examples/tutorial4.xml">tutorial4.xml</a></td>
</tr>
<tr class="row-even"><td>Runtime model report</td>
<td><a class="reference external" href="./examples/tutorial4-rt.xml">tutorial4-rt.xml</a></td>
</tr>
<tr class="row-odd"><td>Source code</td>
<td><a class="reference external" href="./examples/tutorial4.html">tutorial4.py</a></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-daetools.examples.tutorial5">
<span id="tutorial-5"></span><span id="tutorial5"></span><h2>8.1.6. Tutorial 5<a class="headerlink" href="#module-daetools.examples.tutorial5" title="Permalink to this headline">Â¶</a></h2>
<p>This tutorial introduces the following concepts:</p>
<ul class="simple">
<li>Discontinuous equations (non-symmetrical state transition networks: daeSTN statements)</li>
</ul>
<p>In this example we use the same heat transfer problem as in the tutorial 4.
Again we have a piece of copper which is at one side exposed to the source of heat
and at the other to the surroundings.</p>
<p>The process starts at the temperature of 283K. The metal is allowed to warm up, and then
its temperature is kept in the interval (320K - 340K) for 350 seconds. This is performed
by switching the heater on when the temperature drops to 320K and by switching the heater
off when the temperature reaches 340K.
After 350s the heat source is permanently switched off and the metal is allowed to
slowly cool down to the ambient temperature.</p>
<p>This can be modelled using the following non-symmetrical state transition network:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>STN Regulator
  case Heating:
    Qin = 1500 W
    on condition T &gt; 340K switch to Regulator.Cooling
    on condition t &gt; 350s switch to Regulator.HeaterOff

  case Cooling:
    Qin = 0 W
    on condition T &lt; 320K switch to Regulator.Heating
    on condition t &gt; 350s switch to Regulator.HeaterOff

  case HeaterOff:
    Qin = 0 W
</pre></div>
</div>
<p>The temperature plot:</p>
<a class="reference internal image-reference" href="_images/tutorial5-results.png"><img alt="_images/tutorial5-results.png" src="_images/tutorial5-results.png" style="width: 500px;" /></a>
<p class="rubric">Files</p>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="76%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Model report</td>
<td><a class="reference external" href="./examples/tutorial5.xml">tutorial5.xml</a></td>
</tr>
<tr class="row-even"><td>Runtime model report</td>
<td><a class="reference external" href="./examples/tutorial5-rt.xml">tutorial5-rt.xml</a></td>
</tr>
<tr class="row-odd"><td>Source code</td>
<td><a class="reference external" href="./examples/tutorial5.html">tutorial5.py</a></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-daetools.examples.tutorial6">
<span id="tutorial-6"></span><span id="tutorial6"></span><h2>8.1.7. Tutorial 6<a class="headerlink" href="#module-daetools.examples.tutorial6" title="Permalink to this headline">Â¶</a></h2>
<p>This tutorial introduces the following concepts:</p>
<ul class="simple">
<li>Ports</li>
<li>Port connections</li>
<li>Units (instances of other models)</li>
</ul>
<p>A simple port type &#8216;portSimple&#8217; is defined which contains only one variable &#8216;t&#8217;.
Two models &#8216;modPortIn&#8217; and &#8216;modPortOut&#8217; are defined, each having one port of type &#8216;portSimple&#8217;.
The wrapper model &#8216;modTutorial&#8217; instantiate these two models as its units and connects them
by connecting their ports.</p>
<p class="rubric">Files</p>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="76%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Model report</td>
<td><a class="reference external" href="./examples/tutorial6.xml">tutorial6.xml</a></td>
</tr>
<tr class="row-even"><td>Runtime model report</td>
<td><a class="reference external" href="./examples/tutorial6-rt.xml">tutorial6-rt.xml</a></td>
</tr>
<tr class="row-odd"><td>Source code</td>
<td><a class="reference external" href="./examples/tutorial6.html">tutorial6.py</a></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-daetools.examples.tutorial7">
<span id="tutorial-7"></span><span id="tutorial7"></span><h2>8.1.8. Tutorial 7<a class="headerlink" href="#module-daetools.examples.tutorial7" title="Permalink to this headline">Â¶</a></h2>
<p>This tutorial introduces the following concepts:</p>
<ul class="simple">
<li>Quasi steady state initial condition mode (eQuasiSteadyState flag)</li>
<li>User-defined schedules (operating procedures)</li>
<li>Resetting of degrees of freedom</li>
<li>Resetting of initial conditions</li>
</ul>
<p>In this example we use the same heat transfer problem as in the tutorial 4.
The input power of the heater is defined as a variable. Since there is
no equation defined to calculate the value of the input power, the system
contains N variables but only N-1 equations. To create a well-posed DAE system
one of the variable needs to be &#8220;fixed&#8221;. However the choice of variables is not
arbitrary and in this example the only variable that can be fixed is Qin. Thus,
the Qin variable represents a degree of freedom (DOF). Its value will be fixed
at the beginning of the simulation and later manipulated in the user-defined
schedule in the overloaded function daeSimulation.Run().</p>
<p>The default daeSimulation.Run() function (re-implemented in Python) is:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">Run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># Python implementation of daeSimulation::Run() C++ function.</span>
    
    <span class="kn">import</span> <span class="nn">math</span>
    <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">CurrentTime</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">TimeHorizon</span><span class="p">:</span>
        <span class="c1"># Get the time step (based on the TimeHorizon and the ReportingInterval).</span>
        <span class="c1"># Do not allow to get past the TimeHorizon.</span>
        <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">NextReportingTime</span>
        <span class="k">if</span> <span class="n">t</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">TimeHorizon</span><span class="p">:</span>
            <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">TimeHorizon</span>

        <span class="c1"># If the flag is set - a user tries to pause the simulation, therefore return.</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ActivityAction</span> <span class="o">==</span> <span class="n">ePauseActivity</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Log</span><span class="o">.</span><span class="n">Message</span><span class="p">(</span><span class="s2">&quot;Activity paused by the user&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="c1"># If a discontinuity is found, loop until the end of the integration period.</span>
        <span class="c1"># The data will be reported around discontinuities!</span>
        <span class="k">while</span> <span class="n">t</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">CurrentTime</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Log</span><span class="o">.</span><span class="n">Message</span><span class="p">(</span><span class="s2">&quot;Integrating from [</span><span class="si">%f</span><span class="s2">] to [</span><span class="si">%f</span><span class="s2">] ...&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">CurrentTime</span><span class="p">,</span> <span class="n">t</span><span class="p">),</span> <span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">IntegrateUntilTime</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">eStopAtModelDiscontinuity</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
        
        <span class="c1"># After the integration period, report the data. </span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ReportData</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">CurrentTime</span><span class="p">)</span>
        
        <span class="c1"># Set the simulation progress.</span>
        <span class="n">newProgress</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="mf">100.0</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">CurrentTime</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">TimeHorizon</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">newProgress</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">Log</span><span class="o">.</span><span class="n">Progress</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Log</span><span class="o">.</span><span class="n">Progress</span> <span class="o">=</span> <span class="n">newProgress</span>
</pre></div>
</div>
<p>In this example the following schedule is specified:</p>
<ol class="arabic simple">
<li>Re-assign the value of Qin to 500W, run the simulation for 100s 
using the IntegrateForTimeInterval function and report the data using the 
ReportData() function.</li>
<li>Re-assign the value of Qin to 7500W, run the simulation the time reaches 200s
using the IntegrateUntilTime function and report the data.</li>
<li>Re-assign the variable Qin to 1000W, run the simulation for 100s in OneStep mode
using the IntegrateForOneStep() function and report the data at every time step.</li>
<li>Re-assign the variable Qin to 1500W, re-initialise the temperature again to 300K,
run the simulation until the TimeHorizon is reached using the function Integrate() 
and report the data.</li>
</ol>
<p>The plot of the inlet power:</p>
<a class="reference internal image-reference" href="_images/tutorial7-results.png"><img alt="_images/tutorial7-results.png" src="_images/tutorial7-results.png" style="width: 500px;" /></a>
<p>The temperature plot:</p>
<a class="reference internal image-reference" href="_images/tutorial7-results2.png"><img alt="_images/tutorial7-results2.png" src="_images/tutorial7-results2.png" style="width: 500px;" /></a>
<p class="rubric">Files</p>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="76%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Model report</td>
<td><a class="reference external" href="./examples/tutorial7.xml">tutorial7.xml</a></td>
</tr>
<tr class="row-even"><td>Runtime model report</td>
<td><a class="reference external" href="./examples/tutorial7-rt.xml">tutorial7-rt.xml</a></td>
</tr>
<tr class="row-odd"><td>Source code</td>
<td><a class="reference external" href="./examples/tutorial7.html">tutorial7.py</a></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-daetools.examples.tutorial8">
<span id="tutorial-8"></span><span id="tutorial8"></span><h2>8.1.9. Tutorial 8<a class="headerlink" href="#module-daetools.examples.tutorial8" title="Permalink to this headline">Â¶</a></h2>
<p>This tutorial introduces the following concepts:</p>
<ul class="simple">
<li>Data reporters and exporting results into the following file formats:<ul>
<li>Matlab MAT file (requires python-scipy package)</li>
<li>MS Excel .xls file (requires python-xlwt package)</li>
<li>JSON file (no third party dependencies)</li>
<li>VTK file (requires pyevtk and vtk packages)</li>
<li>XML file (requires python-lxml package)</li>
<li>HDF5 file (requires python-h5py package)</li>
<li>Pandas dataset (requires python-pandas package)</li>
</ul>
</li>
<li>Implementation of user-defined data reporters</li>
<li>daeDelegateDataReporter</li>
</ul>
<p>Some time it is not enough to send the results to the DAE Plotter but it is desirable to
export them into a specified file format (i.e. for use in other programs). For that purpose,
daetools provide a range of data reporters that save the simulation results in various formats.
In adddition, daetools allow implementation of custom, user-defined data reporters.
As an example, a user-defined data reporter is developed to save the results
into a plain text file (after the simulation is finished). Obviously, the data can be
processed in any other fashion.
Moreover, in certain situation it is required to process the results in more than one way.
The daeDelegateDataReporter can be used in those cases. It has the same interface and the
functionality like all data reporters. However, it does not do any data processing itself
but calls the corresponding functions of data reporters which are added to it using the
function AddDataReporter. This way it is possible, at the same time, to send the results
to the DAE Plotter and save them into a file (or process the data in some other ways).
In this example the results are processed in 10 different ways at the same time.</p>
<p>The model used in this example is very similar to the model in the tutorials 4 and 5.</p>
<p class="rubric">Files</p>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="76%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Model report</td>
<td><a class="reference external" href="./examples/tutorial8.xml">tutorial8.xml</a></td>
</tr>
<tr class="row-even"><td>Runtime model report</td>
<td><a class="reference external" href="./examples/tutorial8-rt.xml">tutorial8-rt.xml</a></td>
</tr>
<tr class="row-odd"><td>Source code</td>
<td><a class="reference external" href="./examples/tutorial8.html">tutorial8.py</a></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-daetools.examples.tutorial9">
<span id="tutorial-9"></span><span id="tutorial9"></span><h2>8.1.10. Tutorial 9<a class="headerlink" href="#module-daetools.examples.tutorial9" title="Permalink to this headline">Â¶</a></h2>
<p>This tutorial introduces the following concepts:</p>
<ul class="simple">
<li>Third party <strong>direct</strong> linear equations solvers</li>
</ul>
<p>Currently there are the following linear equations solvers available:</p>
<ul class="simple">
<li>SuperLU: sequential sparse direct solver defined in pySuperLU module (BSD licence)</li>
<li>SuperLU_MT: multi-threaded sparse direct solver defined in pySuperLU_MT module (BSD licence)</li>
<li>Trilinos Amesos: sequential sparse direct solver defined in pyTrilinos module (GNU Lesser GPL)</li>
<li>IntelPardiso: multi-threaded sparse direct solver defined in pyIntelPardiso module (proprietary)</li>
<li>Pardiso: multi-threaded sparse direct solver defined in pyPardiso module (proprietary)</li>
</ul>
<p>In this example we use the same conduction problem as in the tutorial 1.</p>
<p>The temperature plot (at t=100s, x=0.5, y=*):</p>
<a class="reference internal image-reference" href="_images/tutorial9-results.png"><img alt="_images/tutorial9-results.png" src="_images/tutorial9-results.png" style="width: 500px;" /></a>
<p class="rubric">Files</p>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="76%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Model report</td>
<td><a class="reference external" href="./examples/tutorial9.xml">tutorial9.xml</a></td>
</tr>
<tr class="row-even"><td>Runtime model report</td>
<td><a class="reference external" href="./examples/tutorial9-rt.xml">tutorial9-rt.xml</a></td>
</tr>
<tr class="row-odd"><td>Source code</td>
<td><a class="reference external" href="./examples/tutorial9.html">tutorial9.py</a></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-daetools.examples.tutorial10">
<span id="tutorial-10"></span><span id="tutorial10"></span><h2>8.1.11. Tutorial 10<a class="headerlink" href="#module-daetools.examples.tutorial10" title="Permalink to this headline">Â¶</a></h2>
<p>This tutorial introduces the following concepts:</p>
<ul class="simple">
<li>Initialization files</li>
<li>Domains which bounds depend on parameter values</li>
<li>Evaluation of integrals</li>
</ul>
<p>In this example we use the same conduction problem as in the tutorial 1.</p>
<p class="rubric">Files</p>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="76%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Model report</td>
<td><a class="reference external" href="./examples/tutorial10.xml">tutorial10.xml</a></td>
</tr>
<tr class="row-even"><td>Runtime model report</td>
<td><a class="reference external" href="./examples/tutorial10-rt.xml">tutorial10-rt.xml</a></td>
</tr>
<tr class="row-odd"><td>Source code</td>
<td><a class="reference external" href="./examples/tutorial10.html">tutorial10.py</a></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-daetools.examples.tutorial11">
<span id="tutorial-11"></span><span id="tutorial11"></span><h2>8.1.12. Tutorial 11<a class="headerlink" href="#module-daetools.examples.tutorial11" title="Permalink to this headline">Â¶</a></h2>
<p>This tutorial describes the use of iterative linear solvers (AztecOO from the Trilinos project)
with different preconditioners (built-in AztecOO, Ifpack or ML) and corresponding solver options.
Also, the range of Trilins Amesos solver options are shown.</p>
<p>The model is very similar to the model in tutorial 1, except for the different boundary conditions
and that the equations are written in a different way to maximise the number of items around the
diagonal (creating the problem with the diagonally dominant matrix).
These type of systems can be solved using very simple preconditioners such as Jacobi. To do so,
the interoperability with the NumPy package has been exploited and the package itertools used to
iterate through the distribution domains in x and y directions.</p>
<p>The equations are distributed in such a way that the following incidence matrix is obtained:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>|XXX                                 |
| X     X     X                      |
|  X     X     X                     |
|   X     X     X                    |
|    X     X     X                   |
|   XXX                              |
|      XXX                           |
| X    XXX    X                      |
|  X    XXX    X                     |
|   X    XXX    X                    |
|    X    XXX    X                   |
|         XXX                        |
|            XXX                     |
|       X    XXX    X                |
|        X    XXX    X               |
|         X    XXX    X              |
|          X    XXX    X             |
|               XXX                  |
|                  XXX               |
|             X    XXX    X          |
|              X    XXX    X         |
|               X    XXX    X        |
|                X    XXX    X       |
|                     XXX            |
|                        XXX         |
|                   X    XXX    X    |
|                    X    XXX    X   |
|                     X    XXX    X  |
|                      X    XXX    X |
|                           XXX      |
|                              XXX   |
|                   X     X     X    |
|                    X     X     X   |
|                     X     X     X  |
|                      X     X     X |
|                                 XXX|
</pre></div>
</div>
<p>The temperature plot (at t=100s, x=0.5, y=*):</p>
<a class="reference internal image-reference" href="_images/tutorial11-results.png"><img alt="_images/tutorial11-results.png" src="_images/tutorial11-results.png" style="width: 500px;" /></a>
<p class="rubric">Files</p>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="76%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Model report</td>
<td><a class="reference external" href="./examples/tutorial11.xml">tutorial11.xml</a></td>
</tr>
<tr class="row-even"><td>Runtime model report</td>
<td><a class="reference external" href="./examples/tutorial11-rt.xml">tutorial11-rt.xml</a></td>
</tr>
<tr class="row-odd"><td>Source code</td>
<td><a class="reference external" href="./examples/tutorial11.html">tutorial11.py</a></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-daetools.examples.tutorial12">
<span id="tutorial-12"></span><span id="tutorial12"></span><h2>8.1.13. Tutorial 12<a class="headerlink" href="#module-daetools.examples.tutorial12" title="Permalink to this headline">Â¶</a></h2>
<p>This tutorial describes the use and available options for superLU direct linear solvers:</p>
<ul class="simple">
<li>Sequential: superLU</li>
<li>Multithreaded (OpenMP/posix threads): superLU_MT</li>
</ul>
<p>The model is the same as the model in tutorial 1, except for the different boundary conditions.</p>
<p>The temperature plot (at t=100s, x=0.5, y=*):</p>
<a class="reference internal image-reference" href="_images/tutorial12-results.png"><img alt="_images/tutorial12-results.png" src="_images/tutorial12-results.png" style="width: 500px;" /></a>
<p class="rubric">Files</p>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="76%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Model report</td>
<td><a class="reference external" href="./examples/tutorial12.xml">tutorial12.xml</a></td>
</tr>
<tr class="row-even"><td>Runtime model report</td>
<td><a class="reference external" href="./examples/tutorial12-rt.xml">tutorial12-rt.xml</a></td>
</tr>
<tr class="row-odd"><td>Source code</td>
<td><a class="reference external" href="./examples/tutorial12.html">tutorial12.py</a></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-daetools.examples.tutorial13">
<span id="tutorial-13"></span><span id="tutorial13"></span><h2>8.1.14. Tutorial 13<a class="headerlink" href="#module-daetools.examples.tutorial13" title="Permalink to this headline">Â¶</a></h2>
<p>This tutorial introduces the following concepts:</p>
<ul class="simple">
<li>The event ports</li>
<li>ON_CONDITION() function illustrating the types of actions that can be executed
during state transitions</li>
<li>ON_EVENT() function illustrating the types of actions that can be executed
when an event is triggered</li>
<li>User defined actions</li>
</ul>
<p>In this example we use the very similar model as in the tutorial 5.</p>
<p>The simulation output should show the following messages at t=100s and t=350s:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>...
********************************************************
simpleUserAction2 message:
This message should be fired when the time is 100s.
********************************************************
...
********************************************************
simpleUserAction executed; input data = 427.464093129832
********************************************************
...
</pre></div>
</div>
<p>The plot of the &#8216;event&#8217; variable:</p>
<a class="reference internal image-reference" href="_images/tutorial13-results.png"><img alt="_images/tutorial13-results.png" src="_images/tutorial13-results.png" style="width: 500px;" /></a>
<p>The temperature plot:</p>
<a class="reference internal image-reference" href="_images/tutorial13-results2.png"><img alt="_images/tutorial13-results2.png" src="_images/tutorial13-results2.png" style="width: 500px;" /></a>
<p class="rubric">Files</p>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="76%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Model report</td>
<td><a class="reference external" href="./examples/tutorial13.xml">tutorial13.xml</a></td>
</tr>
<tr class="row-even"><td>Runtime model report</td>
<td><a class="reference external" href="./examples/tutorial13-rt.xml">tutorial13-rt.xml</a></td>
</tr>
<tr class="row-odd"><td>Source code</td>
<td><a class="reference external" href="./examples/tutorial13.html">tutorial13.py</a></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-daetools.examples.tutorial14">
<span id="tutorial-14"></span><span id="tutorial14"></span><h2>8.1.15. Tutorial 14<a class="headerlink" href="#module-daetools.examples.tutorial14" title="Permalink to this headline">Â¶</a></h2>
<p>In this tutorial we introduce the external functions concept that can handle and execute
functions in external libraries. The daeScalarExternalFunction-derived external function
object is used to calculate the heat transferred and to interpolate a set of values
using the scipy.interpolate.interp1d object. In addition, functions defined in shared 
libraries (.so in GNU/Linux, .dll in Windows and .dylib in macOS) can be used via
ctypes Python library and daeCTypesExternalFunction class.</p>
<p>In this example we use the same model as in the tutorial 5 with few additional equations.</p>
<p>The simulation output should show the following messages at the end of simulation:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>...
scipy.interp1d statistics:
  interp1d called 1703 times (cache value used 770 times)
</pre></div>
</div>
<p>The plot of the &#8216;Heat_ext1&#8217; variable:</p>
<a class="reference internal image-reference" href="_images/tutorial14-results.png"><img alt="_images/tutorial14-results.png" src="_images/tutorial14-results.png" style="width: 500px;" /></a>
<p>The plot of the &#8216;Heat_ext2&#8217; variable:</p>
<a class="reference internal image-reference" href="_images/tutorial14-results1.png"><img alt="_images/tutorial14-results1.png" src="_images/tutorial14-results1.png" style="width: 500px;" /></a>
<p>The plot of the &#8216;Value_interp&#8217; variable:</p>
<a class="reference internal image-reference" href="_images/tutorial14-results2.png"><img alt="_images/tutorial14-results2.png" src="_images/tutorial14-results2.png" style="width: 500px;" /></a>
<p class="rubric">Files</p>
<table border="1" class="docutils">
<colgroup>
<col width="29%" />
<col width="71%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Model report</td>
<td><a class="reference external" href="./examples/tutorial14.xml">tutorial14.xml</a></td>
</tr>
<tr class="row-even"><td>Runtime model report</td>
<td><a class="reference external" href="./examples/tutorial14-rt.xml">tutorial14-rt.xml</a></td>
</tr>
<tr class="row-odd"><td>Source code</td>
<td><a class="reference external" href="./examples/tutorial14.html">tutorial14.py</a></td>
</tr>
<tr class="row-even"><td>External function source code</td>
<td><a class="reference external" href="./examples/tutorial14_heat_function.html">tutorial14_heat_function.c</a></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-daetools.examples.tutorial15">
<span id="tutorial-15"></span><span id="tutorial15"></span><h2>8.1.16. Tutorial 15<a class="headerlink" href="#module-daetools.examples.tutorial15" title="Permalink to this headline">Â¶</a></h2>
<p>This tutorial introduces the following concepts:</p>
<ul class="simple">
<li>Nested state transitions</li>
</ul>
<p>In this example we use the same model as in the tutorial 4 with the more complex STN:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>IF t &lt; 200
  IF 0 &lt;= t &lt; 100
     IF 0 &lt;= t &lt; 50
       Qin = 1600 W
     ELSE
       Qin = 1500 W
  ELSE
    Qin = 1400 W

ELSE IF 200 &lt;= t &lt; 300
  Qin = 1300 W

ELSE
  Qin = 0 W
</pre></div>
</div>
<p>The plot of the &#8216;Qin&#8217; variable:</p>
<a class="reference internal image-reference" href="_images/tutorial15-results.png"><img alt="_images/tutorial15-results.png" src="_images/tutorial15-results.png" style="width: 500px;" /></a>
<p>The temperature plot:</p>
<a class="reference internal image-reference" href="_images/tutorial15-results2.png"><img alt="_images/tutorial15-results2.png" src="_images/tutorial15-results2.png" style="width: 500px;" /></a>
<p class="rubric">Files</p>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="76%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Model report</td>
<td><a class="reference external" href="./examples/tutorial15.xml">tutorial15.xml</a></td>
</tr>
<tr class="row-even"><td>Runtime model report</td>
<td><a class="reference external" href="./examples/tutorial15-rt.xml">tutorial15-rt.xml</a></td>
</tr>
<tr class="row-odd"><td>Source code</td>
<td><a class="reference external" href="./examples/tutorial15.html">tutorial15.py</a></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-daetools.examples.tutorial16">
<span id="tutorial-16"></span><span id="tutorial16"></span><h2>8.1.17. Tutorial 16<a class="headerlink" href="#module-daetools.examples.tutorial16" title="Permalink to this headline">Â¶</a></h2>
<p>This tutorial shows how to use DAE Tools objects with NumPy arrays to solve a simple
stationary heat conduction in one dimension using the Finite Elements method
with linear elements and two ways of manually assembling a stiffness matrix/load vector:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>d2T(x)/dx2 = F(x);  x in (0, Lx)
</pre></div>
</div>
<p>Linear finite elements discretisation and simple FE matrix assembly:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>                  phi                 phi
                     (k-1)               (k)
                     
                    *                   *             
                  * | *               * | *            
                *   |   *           *   |   *          
              *     |     *       *     |     *        
            *       |       *   *       |       *      
          *         |         *         |         *        
        *           |       *   *       |           *      
      *             |     *       *     |             *    
    *               |   *           *   |               *  
  *                 | *  element (k)  * |                 *
*-------------------*+++++++++++++++++++*-------------------*-
                    x                   x
                     (k-i                (k)
                   
                    \_________ _________/
                              |
                              dx
</pre></div>
</div>
<p>The comparison of the analytical solution and two ways of assembling the system is given
in the following plot:</p>
<a class="reference internal image-reference" href="_images/tutorial16-results.png"><img alt="_images/tutorial16-results.png" src="_images/tutorial16-results.png" style="width: 500px;" /></a>
<p class="rubric">Files</p>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="76%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Model report</td>
<td><a class="reference external" href="./examples/tutorial16.xml">tutorial16.xml</a></td>
</tr>
<tr class="row-even"><td>Runtime model report</td>
<td><a class="reference external" href="./examples/tutorial16-rt.xml">tutorial16-rt.xml</a></td>
</tr>
<tr class="row-odd"><td>Source code</td>
<td><a class="reference external" href="./examples/tutorial16.html">tutorial16.py</a></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-daetools.examples.tutorial17">
<span id="tutorial-17"></span><span id="tutorial17"></span><h2>8.1.18. Tutorial 17<a class="headerlink" href="#module-daetools.examples.tutorial17" title="Permalink to this headline">Â¶</a></h2>
<p>This tutorial introduces the following concepts:</p>
<ul class="simple">
<li>TCPIP Log and TCPIPLogServer</li>
</ul>
<p>In this example we use the same heat transfer problem as in the tutorial 7.</p>
<p>The screenshot of the TCP/IP log server:</p>
<a class="reference internal image-reference" href="_images/tutorial17-screenshot.png"><img alt="_images/tutorial17-screenshot.png" src="_images/tutorial17-screenshot.png" style="width: 500px;" /></a>
<p>The temperature plot:</p>
<a class="reference internal image-reference" href="_images/tutorial17-results.png"><img alt="_images/tutorial17-results.png" src="_images/tutorial17-results.png" style="width: 500px;" /></a>
<p class="rubric">Files</p>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="76%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Model report</td>
<td><a class="reference external" href="./examples/tutorial17.xml">tutorial17.xml</a></td>
</tr>
<tr class="row-even"><td>Runtime model report</td>
<td><a class="reference external" href="./examples/tutorial17-rt.xml">tutorial17-rt.xml</a></td>
</tr>
<tr class="row-odd"><td>Source code</td>
<td><a class="reference external" href="./examples/tutorial17.html">tutorial17.py</a></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-daetools.examples.tutorial18">
<span id="tutorial-18"></span><span id="tutorial18"></span><h2>8.1.19. Tutorial 18<a class="headerlink" href="#module-daetools.examples.tutorial18" title="Permalink to this headline">Â¶</a></h2>
<p>This tutorial shows one more problem solved using the NumPy arrays that operate on
DAE Tools variables. The model is taken from the Sundials ARKODE (ark_analytic_sys.cpp).
The ODE system is defined by the following system of equations:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>dy/dt = A*y
</pre></div>
</div>
<p>where:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>A = V * D * Vi
V = [1 -1 1; -1 2 1; 0 -1 2];
Vi = 0.25 * [5 1 -3; 2 2 -2; 1 1 1];
D = [-0.5 0 0; 0 -0.1 0; 0 0 lam];
</pre></div>
</div>
<p>lam is a large negative number.</p>
<p>The analytical solution to this problem is:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>Y(t) = V*exp(D*t)*Vi*Y0
</pre></div>
</div>
<p>for t in the interval [0.0, 0.05], with initial condition y(0) = [1,1,1]&#8217;.</p>
<p>The stiffness of the problem is directly proportional to the value of &#8220;lamda&#8221;.
The value of lamda should be negative to result in a well-posed ODE;
for values with magnitude larger than 100 the problem becomes quite stiff.</p>
<p>In this example, we choose lamda = -100.</p>
<p>The solution:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>lamda = -100
reltol = 1e-06
abstol = 1e-10

--------------------------------------
   t        y0        y1        y2
--------------------------------------
 0.0050   0.70327   0.70627   0.41004
 0.0100   0.52267   0.52865   0.05231
 0.0150   0.41249   0.42145  -0.16456
 0.0200   0.34504   0.35696  -0.29600
 0.0250   0.30349   0.31838  -0.37563
 0.0300   0.27767   0.29551  -0.42383
 0.0350   0.26138   0.28216  -0.45296
 0.0400   0.25088   0.27459  -0.47053
 0.0450   0.24389   0.27053  -0.48109
 0.0500   0.23903   0.26858  -0.48740
--------------------------------------
</pre></div>
</div>
<p>The plot of the &#8216;y0&#8217;, &#8216;y1&#8217;, &#8216;y2&#8217; variables:</p>
<a class="reference internal image-reference" href="_images/tutorial18-results.png"><img alt="_images/tutorial18-results.png" src="_images/tutorial18-results.png" style="width: 500px;" /></a>
<p class="rubric">Files</p>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="76%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Model report</td>
<td><a class="reference external" href="./examples/tutorial18.xml">tutorial18.xml</a></td>
</tr>
<tr class="row-even"><td>Runtime model report</td>
<td><a class="reference external" href="./examples/tutorial18-rt.xml">tutorial18-rt.xml</a></td>
</tr>
<tr class="row-odd"><td>Source code</td>
<td><a class="reference external" href="./examples/tutorial18.html">tutorial18.py</a></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-daetools.examples.tutorial19">
<span id="tutorial-19"></span><span id="tutorial19"></span><h2>8.1.20. Tutorial 19<a class="headerlink" href="#module-daetools.examples.tutorial19" title="Permalink to this headline">Â¶</a></h2>
<p>This tutorial introduces the thermo physical property packages.</p>
<p>Since there are many thermo packages with a very different API the CapeOpen
standard has been adopted in daetools. This way, all thermo packages implementing
the CapeOpen thermo interfaces are automatically vailable to daetools. Those which
do not are wrapped by the class with the CapeOpen conforming API.
At the moment, two types of thermophysical property packages are implemented:</p>
<ul class="simple">
<li>Any CapeOpen v1.1 thermo package (available only in Windows)</li>
<li>CoolProp thermo package (available for all platforms) wrapped in
the class with the CapeOpen interface.</li>
</ul>
<p>The central point is the daeThermoPhysicalPropertyPackage class. It can load any
COM component that implements CapeOpen 1.1 ICapeThermoPropertyPackageManager interface
or the CoolProp thermo package.</p>
<p>The framework provides low-level functions (specified in the CapeOpen standard) in the
daeThermoPhysicalPropertyPackage class and the higher-level functions in the auxiliary
daeThermoPackage class defined in the daetools/pyDAE/thermo_packages.py file.
The low-level functions are defined in the ICapeThermoCoumpounds and ICapeThermoPropertyRoutine
CapeOpen interfaces. These functions come in two flavours:</p>
<ol class="loweralpha simple">
<li>The ordinary functions return adouble/adouble_array objects and can only be used to specify equations:<ul>
<li>GetCompoundConstant (from ICapeThermoCoumpounds interface)</li>
<li>GetTDependentProperty (from ICapeThermoCoumpounds interface)</li>
<li>GetPDependentProperty (from ICapeThermoCoumpounds interface)</li>
<li>CalcSinglePhaseScalarProperty (from ICapeThermoPropertyRoutine interface: scalar version)</li>
<li>CalcSinglePhaseVectorProperty (from ICapeThermoPropertyRoutine interface: vector version)</li>
<li>CalcTwoPhaseScalarProperty (from ICapeThermoPropertyRoutine interface: scalar version)</li>
<li>CalcTwoPhaseVectorProperty (from ICapeThermoPropertyRoutine interface: vector version)</li>
</ul>
</li>
<li>The functions starting with the underscores can be used for calculations (they use and return float values):<ul>
<li>_GetCompoundConstant</li>
<li>_GetTDependentProperty</li>
<li>_GetPDependentProperty</li>
<li>_CalcSinglePhaseScalarProperty</li>
<li>_CalcSinglePhaseVectorProperty</li>
<li>_CalcTwoPhaseScalarProperty</li>
<li>_CalcTwoPhaseVectorProperty</li>
</ul>
</li>
</ol>
<p>The daeThermoPackage auxiliary class offers functions to calculate specified properties, for instance:</p>
<ul class="simple">
<li>Transport properties:<ul>
<li>cp, kappa, mu, Dab (heat capacity, thermal conductivity, dynamic viscosity, diffusion coefficient)</li>
</ul>
</li>
<li>Thermodynamic properties:<ul>
<li>rho</li>
<li>h, s, G, H, I (enthalpy, entropy, gibbs/helmholtz/internal energy)</li>
<li>h_E, s_E, G_E, H_E, I_E, V_E (excess enthalpy, entropy, gibbs/helmholtz/internal energy, volume)</li>
<li>f and phi (fugacity and coefficient of fugacity)</li>
<li>a and gamma (activity and the coefficient of activity)</li>
<li>z (compressibility factor)</li>
<li>K, surfaceTension (ratio of fugacity coefficients and the surface tension)</li>
</ul>
</li>
</ul>
<dl class="docutils">
<dt>Nota bene:</dt>
<dd>Some of the above functions return scalars while the others return arrays of values.
Check the thermo_packages.py file for details.</dd>
</dl>
<p>All functions return properties in the SI units (as specified in the CapeOpen 1.1 standard).</p>
<p>Known issues:</p>
<ul class="simple">
<li>Many properties from the CapeOpen standard are not supported by all thermo packages.</li>
<li>CalcEquilibrium from the ICapeThermoEquilibriumRoutine is not supported.</li>
<li>CoolProp does not provide transport models for many compounds.</li>
<li>The function calls are NOT thread safe.</li>
<li>The code generation will NOT work for models using the thermo packages.</li>
<li>Some CapeOpen thermo packags refuse to return properties for mass basis (i.e. density).</li>
</ul>
<p>In this tutorial, we use a very simple model: a quantity of liquid (water + ethanol mixture) 
is heated using the constant input power. The model uses a thermo package to calculate the commonly
used transport properties such as specific heat capacity, thermal conductivity, dynamic viscosity
and binary diffusion coefficients. First, the low-level functions are tested for CapeOpen and 
CoolProp packages in the test_single_phase, test_two_phase, test_coolprop_single_phase functions. 
The results depend on the options selected in the CapeOpen package (equation of state, etc.).
Then, the model that uses a thermo package is simulated.</p>
<p>The plot of the specific heat capacity as a function of temperature:</p>
<a class="reference internal image-reference" href="_images/tutorial19-results.png"><img alt="_images/tutorial19-results.png" src="_images/tutorial19-results.png" style="width: 500px;" /></a>
<dl class="docutils">
<dt>Nota bene:</dt>
<dd>There is a difference between results in Windows and other platforms since 
the CapeOpen thermo packages are available only in Windows.</dd>
</dl>
<p class="rubric">Files</p>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="76%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Model report</td>
<td><a class="reference external" href="./examples/tutorial19.xml">tutorial19.xml</a></td>
</tr>
<tr class="row-even"><td>Runtime model report</td>
<td><a class="reference external" href="./examples/tutorial19-rt.xml">tutorial19-rt.xml</a></td>
</tr>
<tr class="row-odd"><td>Source code</td>
<td><a class="reference external" href="./examples/tutorial19.html">tutorial19.py</a></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-daetools.examples.tutorial20">
<span id="tutorial-20"></span><span id="tutorial20"></span><h2>8.1.21. Tutorial 20<a class="headerlink" href="#module-daetools.examples.tutorial20" title="Permalink to this headline">Â¶</a></h2>
<p>This tutorial illustrates the support variable constraints available in Sundials IDA solver.
Benchmarks are available from <a class="reference external" href="https://www.mathworks.com/help/matlab/math/nonnegative-ode-solution.html">Matlab documentation</a>.</p>
<ol class="arabic">
<li><p class="first">Absolute Value Function:</p>
<p>dy/dt = -fabs(y)</p>
<p>solved on the interval [0,40] with the initial condition y(0) = 1.
The solution of this ODE decays to zero. If the solver produces a negative solution value,
the computation eventually will fail as the calculated solution diverges to -inf.
Using the constraint y &gt;= 0 resolves this problem.</p>
</li>
<li><p class="first">The Knee problem:</p>
<p>epsilon * dy/dt = (1-t)*y - y**2</p>
<p>solved on the interval [0,2] with the initial condition y(0) = 1.
The parameter epsilon is 0 &lt; epsilon &lt;&lt; 1 and in this example equal to 1e-6.
The solution follows the y = 1-x isocline for the whole interval of integration
which is incorrect. Using the constraint y &gt;= 0 resolves the problem.</p>
</li>
</ol>
<p>In DAE Tools contraints follow the Sundials IDA solver implementation and can be 
specified using the valueConstraint argument of the daeVariableType class __init__
function:</p>
<ul class="simple">
<li>eNoConstraint (default)</li>
<li>eValueGTEQ: imposes &gt;= 0 constraint</li>
<li>eValueLTEQ: imposes &lt;= 0 constraint</li>
<li>eValueGT:   imposes &gt; 0 constraint</li>
<li>eValueLT:   imposes &lt; 0 constraint</li>
</ul>
<p>and changed for individual variables using daeVariable.SetValueConstraint functions.</p>
<p>Absolute Value Function solution plot:</p>
<a class="reference internal image-reference" href="_images/tutorial20-results1.png"><img alt="_images/tutorial20-results1.png" src="_images/tutorial20-results1.png" style="width: 500px;" /></a>
<p>The Knee problem solution plot:</p>
<a class="reference internal image-reference" href="_images/tutorial20-results2.png"><img alt="_images/tutorial20-results2.png" src="_images/tutorial20-results2.png" style="width: 500px;" /></a>
<p class="rubric">Files</p>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="76%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Source code</td>
<td><a class="reference external" href="./examples/tutorial20.html">tutorial20.py</a></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-daetools.examples.tutorial21">
<span id="tutorial-21"></span><span id="tutorial21"></span><h2>8.1.22. Tutorial 21<a class="headerlink" href="#module-daetools.examples.tutorial21" title="Permalink to this headline">Â¶</a></h2>
<p>This tutorial introduces different methods for evaluation of equations in parallel.
Equations residuals, Jacobian matrix and sensitivity residuals can be evaluated 
in parallel using two methods</p>
<ol class="arabic">
<li><p class="first">The Evaluation Tree approach (default)</p>
<p>OpenMP API is used for evaluation in parallel.
This method is specified by setting daetools.core.equations.evaluationMode option 
in daetools.cfg to &#8220;evaluationTree_OpenMP&#8221; or setting the simulation property:</p>
<p>simulation.EvaluationMode = eEvaluationTree_OpenMP</p>
<p>numThreads controls the number of OpenMP threads in a team.
If numThreads is 0 the default number of threads is used (the number of cores in the system). 
Sequential evaluation is achieved by setting numThreads to 1.</p>
</li>
<li><p class="first">The Compute Stack approach</p>
<p>Equations can be evaluated in parallel using:</p>
<ol class="loweralpha">
<li><p class="first">OpenMP API for general purpose processors and manycore devices.</p>
<p>This method is specified by setting daetools.core.equations.evaluationMode option 
in daetools.cfg to &#8220;computeStack_OpenMP&#8221; or setting the simulation property:</p>
<p>simulation.EvaluationMode = eComputeStack_OpenMP</p>
<p>numThreads controls the number of OpenMP threads in a team.
If numThreads is 0 the default number of threads is used (the number of cores in the system). 
Sequential evaluation is achieved by setting numThreads to 1.</p>
</li>
<li><p class="first">OpenCL framework for streaming processors and heterogeneous systems.</p>
<p>This type is implemented in an external Python module pyEvaluator_OpenCL. 
It is up to one order of magnitude faster than the Evaluation Tree approach. 
However, it does not support external functions nor thermo-physical packages.</p>
<p>OpenCL evaluators can use a single or multiple OpenCL devices.
It is required to install OpenCL drivers/runtime libraries.
Intel: <a class="reference external" href="https://software.intel.com/en-us/articles/opencl-drivers">https://software.intel.com/en-us/articles/opencl-drivers</a>
AMD: <a class="reference external" href="https://support.amd.com/en-us/kb-articles/Pages/OpenCL2-Driver.aspx">https://support.amd.com/en-us/kb-articles/Pages/OpenCL2-Driver.aspx</a>
NVidia: <a class="reference external" href="https://developer.nvidia.com/opencl">https://developer.nvidia.com/opencl</a></p>
</li>
</ol>
</li>
</ol>
<p class="rubric">Files</p>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="76%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Source code</td>
<td><a class="reference external" href="./examples/tutorial21.html">tutorial21.py</a></td>
</tr>
</tbody>
</table>
</div>
</div>


    </div>
      
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
<div id="sourcelink">
  <a href="_sources/tutorials-basic.rst.txt"
     rel="nofollow">Source</a>
</div>
      
    </p>
    <p>
        &copy; Copyright 2008-2019, Dragan Nikolic.<br/>
      Last updated on Mar 29, 2019.<br/>
    </p>
  </div>
</footer>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-52277546-1', 'daetools.com');
  ga('send', 'pageview');
</script>


  </body>
</html>