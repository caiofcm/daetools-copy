<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="Generator" content="Kate, the KDE Advanced Text Editor" />
<title>tutorial_che_10.py</title>
</head>
<!-- Highlighting: "Python" -->
<body>
<pre style='color:#1f1c1b;background-color:#ffffff;'>
<span style='color:#017a31;'>#!/usr/bin/env python</span>
<span style='color:#017a31;'># -*- coding: utf-8 -*-</span>

<span style='color:#017a31;'>&quot;&quot;&quot;</span><span style='color:#017a31;'>********************************************************************************</span>
<span style='color:#017a31;'>                            tutorial_che_10.py</span>
<span style='color:#017a31;'>                 DAE Tools: pyDAE module, www.daetools.com</span>
<span style='color:#017a31;'>                 Copyright (C) Dragan Nikolic</span>
<span style='color:#017a31;'>***********************************************************************************</span>
<span style='color:#017a31;'>DAE Tools is free software; you can redistribute it and/or modify it under the</span>
<span style='color:#017a31;'>terms of the GNU General Public License version 3 as published by the Free Software</span>
<span style='color:#017a31;'>Foundation. DAE Tools is distributed in the hope that it will be useful, but WITHOUT</span>
<span style='color:#017a31;'>ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A</span>
<span style='color:#017a31;'>PARTICULAR PURPOSE. See the GNU General Public License for more details.</span>
<span style='color:#017a31;'>You should have received a copy of the GNU General Public License along with the</span>
<span style='color:#017a31;'>DAE Tools software; if not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<span style='color:#017a31;'>********************************************************************************</span><span style='color:#017a31;'>&quot;&quot;&quot;</span>
__doc__ <b><span style='color:#0000ff;'>=</span></b> <span style='color:#cc0000;'>&quot;&quot;&quot;</span>
<span style='color:#cc0000;'>Williams-Otto plant.</span>
<span style='color:#cc0000;'>&quot;&quot;&quot;</span>

<span style='color:#3605fb;'>import</span> sys
<span style='color:#3605fb;'>from</span> daetools.pyDAE <span style='color:#3605fb;'>import</span> <b><span style='color:#0000ff;'>*</span></b>
<span style='color:#3605fb;'>from</span> time <span style='color:#3605fb;'>import</span> localtime, strftime
<span style='color:#017a31;'># Standard variable types are defined in variable_types.py</span>
<span style='color:#3605fb;'>from</span> pyUnits <span style='color:#3605fb;'>import</span> m, kg, s, K, Pa, mol, J, W, kJ, hour, l

k_t                  <b><span style='color:#0000ff;'>=</span></b> daeVariableType(<span style='color:#cc0000;'>&quot;k_t&quot;</span>,                    s<b><span style='color:#0000ff;'>**</span></b>(<b><span style='color:#0000ff;'>-</span></b><span style='color:#cc047c;'>1</span>),  <span style='color:#cc047c;'>0.0</span>, <span style='color:#cc047c;'>1E20</span>, <span style='color:#cc047c;'>0</span>, <span style='color:#cc047c;'>1e-05</span>)
mass_concentration_t <b><span style='color:#0000ff;'>=</span></b> daeVariableType(<span style='color:#cc0000;'>&quot;mass_concentration_t&quot;</span>, kg<b><span style='color:#0000ff;'>/</span></b>(m<b><span style='color:#0000ff;'>**</span></b><span style='color:#cc047c;'>3</span>),  <span style='color:#cc047c;'>0.0</span>, <span style='color:#cc047c;'>1E20</span>, <span style='color:#cc047c;'>0</span>, <span style='color:#cc047c;'>1e-05</span>)

<b>class</b> modTutorial(daeModel):
    <b>def</b> <b><span style='color:#000e52;'>__init__</span></b>(<span style='color:#3605fb;'>self</span>, Name, Parent <b><span style='color:#0000ff;'>=</span></b> <span style='color:#3605fb;'>None</span>, Description <b><span style='color:#0000ff;'>=</span></b> <span style='color:#cc0000;'>&quot;&quot;</span>):
        daeModel.<b><span style='color:#000e52;'>__init__</span></b>(<span style='color:#3605fb;'>self</span>, Name, Parent, Description)
        
        <span style='color:#3605fb;'>self</span>.Nc <b><span style='color:#0000ff;'>=</span></b> daeDomain(<span style='color:#cc0000;'>&quot;Nc&quot;</span>, <span style='color:#3605fb;'>self</span>, unit(), <span style='color:#cc0000;'>&quot;Number of components&quot;</span>)
        
        <span style='color:#017a31;'># Parameters</span>
        <span style='color:#3605fb;'>self</span>.k10   <b><span style='color:#0000ff;'>=</span></b> daeParameter(<span style='color:#cc0000;'>&quot;k10&quot;</span>,          s<b><span style='color:#0000ff;'>**</span></b>(<b><span style='color:#0000ff;'>-</span></b><span style='color:#cc047c;'>1</span>), <span style='color:#3605fb;'>self</span>, <span style='color:#cc0000;'>&quot;Pre-exponential factor 1&quot;</span>)
        <span style='color:#3605fb;'>self</span>.k20   <b><span style='color:#0000ff;'>=</span></b> daeParameter(<span style='color:#cc0000;'>&quot;k20&quot;</span>,          s<b><span style='color:#0000ff;'>**</span></b>(<b><span style='color:#0000ff;'>-</span></b><span style='color:#cc047c;'>1</span>), <span style='color:#3605fb;'>self</span>, <span style='color:#cc0000;'>&quot;Pre-exponential factor 2&quot;</span>)
        <span style='color:#3605fb;'>self</span>.k30   <b><span style='color:#0000ff;'>=</span></b> daeParameter(<span style='color:#cc0000;'>&quot;k30&quot;</span>,          s<b><span style='color:#0000ff;'>**</span></b>(<b><span style='color:#0000ff;'>-</span></b><span style='color:#cc047c;'>1</span>), <span style='color:#3605fb;'>self</span>, <span style='color:#cc0000;'>&quot;Pre-exponential factor 3&quot;</span>)
        <span style='color:#3605fb;'>self</span>.E1    <b><span style='color:#0000ff;'>=</span></b> daeParameter(<span style='color:#cc0000;'>&quot;E1&quot;</span>,                 K, <span style='color:#3605fb;'>self</span>, <span style='color:#cc0000;'>&quot;Activation energy 1&quot;</span>, )
        <span style='color:#3605fb;'>self</span>.E2    <b><span style='color:#0000ff;'>=</span></b> daeParameter(<span style='color:#cc0000;'>&quot;E2&quot;</span>,                 K, <span style='color:#3605fb;'>self</span>, <span style='color:#cc0000;'>&quot;Activation energy 2&quot;</span>)
        <span style='color:#3605fb;'>self</span>.E3    <b><span style='color:#0000ff;'>=</span></b> daeParameter(<span style='color:#cc0000;'>&quot;E3&quot;</span>,                 K, <span style='color:#3605fb;'>self</span>, <span style='color:#cc0000;'>&quot;Activation energy 3&quot;</span>)
        <span style='color:#3605fb;'>self</span>.rho   <b><span style='color:#0000ff;'>=</span></b> daeParameter(<span style='color:#cc0000;'>&quot;&amp;rho;&quot;</span>,      kg<b><span style='color:#0000ff;'>/</span></b>(m<b><span style='color:#0000ff;'>**</span></b><span style='color:#cc047c;'>3</span>), <span style='color:#3605fb;'>self</span>, <span style='color:#cc0000;'>&quot;Density&quot;</span>)
        
        <span style='color:#3605fb;'>self</span>.sf_d   <b><span style='color:#0000ff;'>=</span></b> daeParameter(<span style='color:#cc0000;'>&quot;sf_d&quot;</span>,      unit(), <span style='color:#3605fb;'>self</span>, <span style='color:#cc0000;'>&quot;Separation factors (decanter)&quot;</span>, [<span style='color:#3605fb;'>self</span>.Nc])
        <span style='color:#3605fb;'>self</span>.sf_c   <b><span style='color:#0000ff;'>=</span></b> daeParameter(<span style='color:#cc0000;'>&quot;sf_c&quot;</span>,      unit(), <span style='color:#3605fb;'>self</span>, <span style='color:#cc0000;'>&quot;Separation factors (column)&quot;</span>, [<span style='color:#3605fb;'>self</span>.Nc])
        <span style='color:#3605fb;'>self</span>.sf_s   <b><span style='color:#0000ff;'>=</span></b> daeParameter(<span style='color:#cc0000;'>&quot;sf_s&quot;</span>,      unit(), <span style='color:#3605fb;'>self</span>, <span style='color:#cc0000;'>&quot;Separation factor (splitter)&quot;</span>)

        <span style='color:#3605fb;'>self</span>.Cr <b><span style='color:#0000ff;'>=</span></b> daeVariable(<span style='color:#cc0000;'>&quot;Cr&quot;</span>, mass_concentration_t, <span style='color:#3605fb;'>self</span>, <span style='color:#cc0000;'>&quot;Concentration of reactants&quot;</span>, [<span style='color:#3605fb;'>self</span>.Nc])
        <span style='color:#3605fb;'>self</span>.Rs <b><span style='color:#0000ff;'>=</span></b> daeVariable(<span style='color:#cc0000;'>&quot;Rs&quot;</span>, mass_flowrate_t,      <span style='color:#3605fb;'>self</span>, <span style='color:#cc0000;'>&quot;Reaction mass source&quot;</span>, [<span style='color:#3605fb;'>self</span>.Nc])

        <span style='color:#017a31;'># Flowrates</span>
        <span style='color:#3605fb;'>self</span>.Ffeed              <b><span style='color:#0000ff;'>=</span></b> daeVariable(<span style='color:#cc0000;'>&quot;Ffeed&quot;</span>,              mass_flowrate_t,     <span style='color:#3605fb;'>self</span>, <span style='color:#cc0000;'>&quot;Feed flowrate&quot;</span>,                      [<span style='color:#3605fb;'>self</span>.Nc])
        <span style='color:#3605fb;'>self</span>.Freactor           <b><span style='color:#0000ff;'>=</span></b> daeVariable(<span style='color:#cc0000;'>&quot;Freactor&quot;</span>,           mass_flowrate_t,     <span style='color:#3605fb;'>self</span>, <span style='color:#cc0000;'>&quot;Reactor outlet components flowrate&quot;</span>, [<span style='color:#3605fb;'>self</span>.Nc])
        <span style='color:#3605fb;'>self</span>.Fdecanter          <b><span style='color:#0000ff;'>=</span></b> daeVariable(<span style='color:#cc0000;'>&quot;Fdecanter&quot;</span>,          mass_flowrate_t,     <span style='color:#3605fb;'>self</span>, <span style='color:#cc0000;'>&quot;Decanter outlet flowrate&quot;</span>,           [<span style='color:#3605fb;'>self</span>.Nc])
        <span style='color:#3605fb;'>self</span>.Fdecanter_pureG    <b><span style='color:#0000ff;'>=</span></b> daeVariable(<span style='color:#cc0000;'>&quot;Fdecanter_pureG&quot;</span>,    mass_flowrate_t,     <span style='color:#3605fb;'>self</span>, <span style='color:#cc0000;'>&quot;Decanter pure G flowrate&quot;</span>,           [<span style='color:#3605fb;'>self</span>.Nc])
        <span style='color:#3605fb;'>self</span>.Fcolumn_top        <b><span style='color:#0000ff;'>=</span></b> daeVariable(<span style='color:#cc0000;'>&quot;Fcolumn_top&quot;</span>,        mass_flowrate_t,     <span style='color:#3605fb;'>self</span>, <span style='color:#cc0000;'>&quot;Column top flowrate&quot;</span>,                [<span style='color:#3605fb;'>self</span>.Nc])
        <span style='color:#3605fb;'>self</span>.Fcolumn_bottom     <b><span style='color:#0000ff;'>=</span></b> daeVariable(<span style='color:#cc0000;'>&quot;Fcolumn_bottom&quot;</span>,     mass_flowrate_t,     <span style='color:#3605fb;'>self</span>, <span style='color:#cc0000;'>&quot;Column bottom flowrate&quot;</span>,             [<span style='color:#3605fb;'>self</span>.Nc])
        <span style='color:#3605fb;'>self</span>.Fsplitter_out      <b><span style='color:#0000ff;'>=</span></b> daeVariable(<span style='color:#cc0000;'>&quot;Fsplitter_out&quot;</span>,      mass_flowrate_t,     <span style='color:#3605fb;'>self</span>, <span style='color:#cc0000;'>&quot;Splitter outlet flowrate&quot;</span>,           [<span style='color:#3605fb;'>self</span>.Nc])
        <span style='color:#3605fb;'>self</span>.Fsplitter_recycle  <b><span style='color:#0000ff;'>=</span></b> daeVariable(<span style='color:#cc0000;'>&quot;Fsplitter_recycle&quot;</span>,  mass_flowrate_t,     <span style='color:#3605fb;'>self</span>, <span style='color:#cc0000;'>&quot;Splitter recycle flowrate&quot;</span>,          [<span style='color:#3605fb;'>self</span>.Nc])

        <span style='color:#3605fb;'>self</span>.Fr_tot <b><span style='color:#0000ff;'>=</span></b> daeVariable(<span style='color:#cc0000;'>&quot;Fr_tot&quot;</span>, mass_flowrate_t, <span style='color:#3605fb;'>self</span>, <span style='color:#cc0000;'>&quot;Reactor outlet total flowrate&quot;</span>)
        <span style='color:#3605fb;'>self</span>.Frecycle_tot <b><span style='color:#0000ff;'>=</span></b> daeVariable(<span style='color:#cc0000;'>&quot;Frecycle_tot&quot;</span>, mass_flowrate_t, <span style='color:#3605fb;'>self</span>, <span style='color:#cc0000;'>&quot;Reactor recycle total flowrate&quot;</span>)
        <span style='color:#3605fb;'>self</span>.Cr_tot <b><span style='color:#0000ff;'>=</span></b> daeVariable(<span style='color:#cc0000;'>&quot;Cr_tot&quot;</span>, mass_concentration_t, <span style='color:#3605fb;'>self</span>, <span style='color:#cc0000;'>&quot;Concentration of reactants&quot;</span>)
        
        <span style='color:#3605fb;'>self</span>.FR <b><span style='color:#0000ff;'>=</span></b> daeVariable(<span style='color:#cc0000;'>&quot;FR&quot;</span>, mass_flowrate_t, <span style='color:#3605fb;'>self</span>, <span style='color:#cc0000;'>&quot;&quot;</span>)
        <span style='color:#3605fb;'>self</span>.FG <b><span style='color:#0000ff;'>=</span></b> daeVariable(<span style='color:#cc0000;'>&quot;FG&quot;</span>, mass_flowrate_t, <span style='color:#3605fb;'>self</span>, <span style='color:#cc0000;'>&quot;&quot;</span>)
        <span style='color:#3605fb;'>self</span>.FE <b><span style='color:#0000ff;'>=</span></b> daeVariable(<span style='color:#cc0000;'>&quot;FE&quot;</span>, mass_flowrate_t, <span style='color:#3605fb;'>self</span>, <span style='color:#cc0000;'>&quot;&quot;</span>)
        <span style='color:#3605fb;'>self</span>.FP <b><span style='color:#0000ff;'>=</span></b> daeVariable(<span style='color:#cc0000;'>&quot;FP&quot;</span>, mass_flowrate_t, <span style='color:#3605fb;'>self</span>, <span style='color:#cc0000;'>&quot;&quot;</span>)
        <span style='color:#3605fb;'>self</span>.FS <b><span style='color:#0000ff;'>=</span></b> daeVariable(<span style='color:#cc0000;'>&quot;FS&quot;</span>, mass_flowrate_t, <span style='color:#3605fb;'>self</span>, <span style='color:#cc0000;'>&quot;&quot;</span>)
        <span style='color:#3605fb;'>self</span>.FD <b><span style='color:#0000ff;'>=</span></b> daeVariable(<span style='color:#cc0000;'>&quot;FD&quot;</span>, mass_flowrate_t, <span style='color:#3605fb;'>self</span>, <span style='color:#cc0000;'>&quot;&quot;</span>)
        <span style='color:#3605fb;'>self</span>.FL <b><span style='color:#0000ff;'>=</span></b> daeVariable(<span style='color:#cc0000;'>&quot;FL&quot;</span>, mass_flowrate_t, <span style='color:#3605fb;'>self</span>, <span style='color:#cc0000;'>&quot;&quot;</span>)
        
        <span style='color:#3605fb;'>self</span>.V      <b><span style='color:#0000ff;'>=</span></b> daeVariable(<span style='color:#cc0000;'>&quot;V&quot;</span>,      volume_t,        <span style='color:#3605fb;'>self</span>, <span style='color:#cc0000;'>&quot;Reactor volume&quot;</span>)
        <span style='color:#3605fb;'>self</span>.xr     <b><span style='color:#0000ff;'>=</span></b> daeVariable(<span style='color:#cc0000;'>&quot;xr&quot;</span>,     fraction_t,      <span style='color:#3605fb;'>self</span>, <span style='color:#cc0000;'>&quot;Fractions in the reactor&quot;</span>, [<span style='color:#3605fb;'>self</span>.Nc])
        <span style='color:#3605fb;'>self</span>.T      <b><span style='color:#0000ff;'>=</span></b> daeVariable(<span style='color:#cc0000;'>&quot;T&quot;</span>,      temperature_t,   <span style='color:#3605fb;'>self</span>, <span style='color:#cc0000;'>&quot;Temperature in the reactor&quot;</span>)

        <span style='color:#3605fb;'>self</span>.k1 <b><span style='color:#0000ff;'>=</span></b> daeVariable(<span style='color:#cc0000;'>&quot;k1&quot;</span>,  k_t,  <span style='color:#3605fb;'>self</span>, <span style='color:#cc0000;'>&quot;Reaction 1 rate constant&quot;</span>)
        <span style='color:#3605fb;'>self</span>.k2 <b><span style='color:#0000ff;'>=</span></b> daeVariable(<span style='color:#cc0000;'>&quot;k2&quot;</span>,  k_t,  <span style='color:#3605fb;'>self</span>, <span style='color:#cc0000;'>&quot;Reaction 2 rate constant&quot;</span>)
        <span style='color:#3605fb;'>self</span>.k3 <b><span style='color:#0000ff;'>=</span></b> daeVariable(<span style='color:#cc0000;'>&quot;k3&quot;</span>,  k_t,  <span style='color:#3605fb;'>self</span>, <span style='color:#cc0000;'>&quot;Reaction 3 rate constant&quot;</span>)

    <b>def</b> DeclareEquations(<span style='color:#3605fb;'>self</span>):
        <span style='color:#017a31;'># Create adouble objects to make equations more readable</span>
        rho <b><span style='color:#0000ff;'>=</span></b> <span style='color:#3605fb;'>self</span>.rho()
        k10 <b><span style='color:#0000ff;'>=</span></b> <span style='color:#3605fb;'>self</span>.k10()
        k20 <b><span style='color:#0000ff;'>=</span></b> <span style='color:#3605fb;'>self</span>.k20()
        k30 <b><span style='color:#0000ff;'>=</span></b> <span style='color:#3605fb;'>self</span>.k30()
        E1  <b><span style='color:#0000ff;'>=</span></b> <span style='color:#3605fb;'>self</span>.E1()
        E2  <b><span style='color:#0000ff;'>=</span></b> <span style='color:#3605fb;'>self</span>.E2()
        E3  <b><span style='color:#0000ff;'>=</span></b> <span style='color:#3605fb;'>self</span>.E3()
        sf_d <b><span style='color:#0000ff;'>=</span></b> <b>lambda</b> i: <span style='color:#3605fb;'>self</span>.sf_d(i)
        sf_c <b><span style='color:#0000ff;'>=</span></b> <b>lambda</b> i: <span style='color:#3605fb;'>self</span>.sf_c(i)
        sf_s <b><span style='color:#0000ff;'>=</span></b> <span style='color:#3605fb;'>self</span>.sf_s()
        <span style='color:#017a31;'># Variables</span>
        k1  <b><span style='color:#0000ff;'>=</span></b> <span style='color:#3605fb;'>self</span>.k1()
        k2  <b><span style='color:#0000ff;'>=</span></b> <span style='color:#3605fb;'>self</span>.k2()
        k3  <b><span style='color:#0000ff;'>=</span></b> <span style='color:#3605fb;'>self</span>.k3()
        V   <b><span style='color:#0000ff;'>=</span></b> <span style='color:#3605fb;'>self</span>.V()
        T   <b><span style='color:#0000ff;'>=</span></b> <span style='color:#3605fb;'>self</span>.T()
        Fr_tot <b><span style='color:#0000ff;'>=</span></b> <span style='color:#3605fb;'>self</span>.Fr_tot()
        Frecycle_tot <b><span style='color:#0000ff;'>=</span></b> <span style='color:#3605fb;'>self</span>.Frecycle_tot()
        
        xr       <b><span style='color:#0000ff;'>=</span></b> <b>lambda</b> i: <span style='color:#3605fb;'>self</span>.xr(i)
        Cr       <b><span style='color:#0000ff;'>=</span></b> <b>lambda</b> i: <span style='color:#3605fb;'>self</span>.Cr(i)
        dCr_dt   <b><span style='color:#0000ff;'>=</span></b> <b>lambda</b> i: dt(Cr(i))
        Cr_tot   <b><span style='color:#0000ff;'>=</span></b> <span style='color:#3605fb;'>self</span>.Cr_tot()
        Cr_total <b><span style='color:#0000ff;'>=</span></b> Sum(<span style='color:#3605fb;'>self</span>.Cr.array(<span style='color:#cc0000;'>'*'</span>))
        Rs       <b><span style='color:#0000ff;'>=</span></b> <b>lambda</b> i: <span style='color:#3605fb;'>self</span>.Rs(i)
        
        Ffeed              <b><span style='color:#0000ff;'>=</span></b> <b>lambda</b> i: <span style='color:#3605fb;'>self</span>.Ffeed(i)
        Freactor           <b><span style='color:#0000ff;'>=</span></b> <b>lambda</b> i: <span style='color:#3605fb;'>self</span>.Freactor(i)
        Fdecanter          <b><span style='color:#0000ff;'>=</span></b> <b>lambda</b> i: <span style='color:#3605fb;'>self</span>.Fdecanter(i)
        Fdecanter_pureG    <b><span style='color:#0000ff;'>=</span></b> <b>lambda</b> i: <span style='color:#3605fb;'>self</span>.Fdecanter_pureG(i)
        Fcolumn_top        <b><span style='color:#0000ff;'>=</span></b> <b>lambda</b> i: <span style='color:#3605fb;'>self</span>.Fcolumn_top(i)
        Fcolumn_bottom     <b><span style='color:#0000ff;'>=</span></b> <b>lambda</b> i: <span style='color:#3605fb;'>self</span>.Fcolumn_bottom(i)
        Fsplitter_out      <b><span style='color:#0000ff;'>=</span></b> <b>lambda</b> i: <span style='color:#3605fb;'>self</span>.Fsplitter_out(i)
        Fsplitter_recycle  <b><span style='color:#0000ff;'>=</span></b> <b>lambda</b> i: <span style='color:#3605fb;'>self</span>.Fsplitter_recycle(i)
        
        Freactor_total <b><span style='color:#0000ff;'>=</span></b> Sum(<span style='color:#3605fb;'>self</span>.Freactor.array(<span style='color:#cc0000;'>'*'</span>))
        Ffeed_total    <b><span style='color:#0000ff;'>=</span></b> Sum(<span style='color:#3605fb;'>self</span>.Ffeed.array(<span style='color:#cc0000;'>'*'</span>))
        Frecycle_total <b><span style='color:#0000ff;'>=</span></b> Sum(<span style='color:#3605fb;'>self</span>.Fsplitter_recycle.array(<span style='color:#cc0000;'>'*'</span>))
        
        <span style='color:#017a31;'># Components:</span>
        A <b><span style='color:#0000ff;'>=</span></b> <span style='color:#cc047c;'>0</span>
        B <b><span style='color:#0000ff;'>=</span></b> <span style='color:#cc047c;'>1</span>
        C <b><span style='color:#0000ff;'>=</span></b> <span style='color:#cc047c;'>2</span>
        E <b><span style='color:#0000ff;'>=</span></b> <span style='color:#cc047c;'>3</span>
        P <b><span style='color:#0000ff;'>=</span></b> <span style='color:#cc047c;'>4</span>
        G <b><span style='color:#0000ff;'>=</span></b> <span style='color:#cc047c;'>5</span>

        <span style='color:#017a31;'>###########################################################</span><span style='color:#81ca2d;'>###</span>
        <span style='color:#017a31;'># Reactor equations</span>
        <span style='color:#017a31;'>###########################################################</span><span style='color:#81ca2d;'>###</span>
        <span style='color:#017a31;'># Intermediates</span>
        r1 <b><span style='color:#0000ff;'>=</span></b> k1 <b><span style='color:#0000ff;'>*</span></b> xr(A)<b><span style='color:#0000ff;'>*</span></b>xr(B)
        r2 <b><span style='color:#0000ff;'>=</span></b> k2 <b><span style='color:#0000ff;'>*</span></b> xr(B)<b><span style='color:#0000ff;'>*</span></b>xr(C)
        r3 <b><span style='color:#0000ff;'>=</span></b> k3 <b><span style='color:#0000ff;'>*</span></b> xr(C)<b><span style='color:#0000ff;'>*</span></b>xr(P)

        Rsource <b><span style='color:#0000ff;'>=</span></b> [<span style='color:#cc047c;'>0</span>,<span style='color:#cc047c;'>0</span>,<span style='color:#cc047c;'>0</span>,<span style='color:#cc047c;'>0</span>,<span style='color:#cc047c;'>0</span>,<span style='color:#cc047c;'>0</span>]
        Rsource[A] <b><span style='color:#0000ff;'>=</span></b> <b><span style='color:#0000ff;'>-</span></b>r1 
        Rsource[B] <b><span style='color:#0000ff;'>=</span></b> <b><span style='color:#0000ff;'>-</span></b>r1 <b><span style='color:#0000ff;'>-</span></b> r2 
        Rsource[C] <b><span style='color:#0000ff;'>=</span></b> <span style='color:#cc047c;'>2</span><b><span style='color:#0000ff;'>*</span></b>r1 <b><span style='color:#0000ff;'>-</span></b> <span style='color:#cc047c;'>2</span><b><span style='color:#0000ff;'>*</span></b>r2 <b><span style='color:#0000ff;'>-</span></b> r3
        Rsource[E] <b><span style='color:#0000ff;'>=</span></b> <span style='color:#cc047c;'>2</span><b><span style='color:#0000ff;'>*</span></b>r2
        Rsource[P] <b><span style='color:#0000ff;'>=</span></b> r2 <b><span style='color:#0000ff;'>-</span></b> <span style='color:#cc047c;'>0.5</span><b><span style='color:#0000ff;'>*</span></b>r3 
        Rsource[G] <b><span style='color:#0000ff;'>=</span></b> <span style='color:#cc047c;'>1.5</span><b><span style='color:#0000ff;'>*</span></b>r3 

        <span style='color:#017a31;'># Reaction rate constants</span>
        eq <b><span style='color:#0000ff;'>=</span></b> <span style='color:#3605fb;'>self</span>.CreateEquation(<span style='color:#cc0000;'>&quot;k1&quot;</span>, <span style='color:#cc0000;'>&quot;&quot;</span>)
        eq.Residual <b><span style='color:#0000ff;'>=</span></b> k1 <b><span style='color:#0000ff;'>-</span></b> k10 <b><span style='color:#0000ff;'>*</span></b> Exp(<b><span style='color:#0000ff;'>-</span></b>E1 <b><span style='color:#0000ff;'>/</span></b> T)

        eq <b><span style='color:#0000ff;'>=</span></b> <span style='color:#3605fb;'>self</span>.CreateEquation(<span style='color:#cc0000;'>&quot;k2&quot;</span>, <span style='color:#cc0000;'>&quot;&quot;</span>)
        eq.Residual <b><span style='color:#0000ff;'>=</span></b> k2 <b><span style='color:#0000ff;'>-</span></b> k20 <b><span style='color:#0000ff;'>*</span></b> Exp(<b><span style='color:#0000ff;'>-</span></b>E2 <b><span style='color:#0000ff;'>/</span></b> T)

        eq <b><span style='color:#0000ff;'>=</span></b> <span style='color:#3605fb;'>self</span>.CreateEquation(<span style='color:#cc0000;'>&quot;k3&quot;</span>, <span style='color:#cc0000;'>&quot;&quot;</span>)
        eq.Residual <b><span style='color:#0000ff;'>=</span></b> k3 <b><span style='color:#0000ff;'>-</span></b> k30 <b><span style='color:#0000ff;'>*</span></b> Exp(<b><span style='color:#0000ff;'>-</span></b>E3 <b><span style='color:#0000ff;'>/</span></b> T)

        <span style='color:#017a31;'># Component mass balance in the reactor</span>
        <b>for</b> i <b>in</b> <span style='color:#2a00d6;'>range</span>(<span style='color:#3605fb;'>self</span>.Nc.NumberOfPoints):
            eq <b><span style='color:#0000ff;'>=</span></b> <span style='color:#3605fb;'>self</span>.CreateEquation(<span style='color:#cc0000;'>&quot;Cr(</span><span style='color:#cc0000;'>%d</span><span style='color:#cc0000;'>)&quot;</span> <b><span style='color:#0000ff;'>%</span></b> i, <span style='color:#cc0000;'>&quot;&quot;</span>)
            eq.Residual <b><span style='color:#0000ff;'>=</span></b> V <b><span style='color:#0000ff;'>*</span></b> dCr_dt(i) <b><span style='color:#0000ff;'>-</span></b> (Ffeed(i) <b><span style='color:#0000ff;'>+</span></b> Fsplitter_recycle(i) <b><span style='color:#0000ff;'>-</span></b> Freactor(i) <b><span style='color:#0000ff;'>+</span></b> Rsource[i]<b><span style='color:#0000ff;'>*</span></b>rho<b><span style='color:#0000ff;'>*</span></b>V)
            
        <b>for</b> i <b>in</b> <span style='color:#2a00d6;'>range</span>(<span style='color:#3605fb;'>self</span>.Nc.NumberOfPoints):
            eq <b><span style='color:#0000ff;'>=</span></b> <span style='color:#3605fb;'>self</span>.CreateEquation(<span style='color:#cc0000;'>&quot;Rs(</span><span style='color:#cc0000;'>%d</span><span style='color:#cc0000;'>)&quot;</span> <b><span style='color:#0000ff;'>%</span></b> i, <span style='color:#cc0000;'>&quot;&quot;</span>)
            eq.Residual <b><span style='color:#0000ff;'>=</span></b> Rs(i) <b><span style='color:#0000ff;'>-</span></b> Rsource[i]<b><span style='color:#0000ff;'>*</span></b>rho<b><span style='color:#0000ff;'>*</span></b>V

        <span style='color:#017a31;'># Overall mass balance in the reactor</span>
        <b>for</b> i <b>in</b> <span style='color:#2a00d6;'>range</span>(<span style='color:#3605fb;'>self</span>.Nc.NumberOfPoints):
            eq <b><span style='color:#0000ff;'>=</span></b> <span style='color:#3605fb;'>self</span>.CreateEquation(<span style='color:#cc0000;'>&quot;xr(</span><span style='color:#cc0000;'>%d</span><span style='color:#cc0000;'>)&quot;</span> <b><span style='color:#0000ff;'>%</span></b> i, <span style='color:#cc0000;'>&quot;&quot;</span>)
            eq.Residual <b><span style='color:#0000ff;'>=</span></b> xr(i) <b><span style='color:#0000ff;'>*</span></b> Cr_total <b><span style='color:#0000ff;'>-</span></b> Cr(i)

        eq <b><span style='color:#0000ff;'>=</span></b> <span style='color:#3605fb;'>self</span>.CreateEquation(<span style='color:#cc0000;'>&quot;FR&quot;</span>, <span style='color:#cc0000;'>&quot;&quot;</span>)
        eq.Residual <b><span style='color:#0000ff;'>=</span></b> <span style='color:#3605fb;'>self</span>.FR() <b><span style='color:#0000ff;'>-</span></b> Sum(<span style='color:#3605fb;'>self</span>.Freactor.array(<span style='color:#cc0000;'>'*'</span>)) <b><span style='color:#0000ff;'>*</span></b> <span style='color:#cc047c;'>2.205</span> <b><span style='color:#0000ff;'>*</span></b> <span style='color:#cc047c;'>3600</span> <span style='color:#017a31;'># in lb/hr</span>

        eq <b><span style='color:#0000ff;'>=</span></b> <span style='color:#3605fb;'>self</span>.CreateEquation(<span style='color:#cc0000;'>&quot;FG&quot;</span>, <span style='color:#cc0000;'>&quot;&quot;</span>)
        eq.Residual <b><span style='color:#0000ff;'>=</span></b> <span style='color:#3605fb;'>self</span>.FG() <b><span style='color:#0000ff;'>-</span></b> Sum(<span style='color:#3605fb;'>self</span>.Fdecanter_pureG.array(<span style='color:#cc0000;'>'*'</span>)) <b><span style='color:#0000ff;'>*</span></b> <span style='color:#cc047c;'>2.205</span> <b><span style='color:#0000ff;'>*</span></b> <span style='color:#cc047c;'>3600</span> <span style='color:#017a31;'># in lb/hr</span>

        eq <b><span style='color:#0000ff;'>=</span></b> <span style='color:#3605fb;'>self</span>.CreateEquation(<span style='color:#cc0000;'>&quot;FE&quot;</span>, <span style='color:#cc0000;'>&quot;&quot;</span>)
        eq.Residual <b><span style='color:#0000ff;'>=</span></b> <span style='color:#3605fb;'>self</span>.FE() <b><span style='color:#0000ff;'>-</span></b> Sum(<span style='color:#3605fb;'>self</span>.Fdecanter.array(<span style='color:#cc0000;'>'*'</span>)) <b><span style='color:#0000ff;'>*</span></b> <span style='color:#cc047c;'>2.205</span> <b><span style='color:#0000ff;'>*</span></b> <span style='color:#cc047c;'>3600</span> <span style='color:#017a31;'># in lb/hr</span>

        eq <b><span style='color:#0000ff;'>=</span></b> <span style='color:#3605fb;'>self</span>.CreateEquation(<span style='color:#cc0000;'>&quot;FP&quot;</span>, <span style='color:#cc0000;'>&quot;&quot;</span>)
        eq.Residual <b><span style='color:#0000ff;'>=</span></b> <span style='color:#3605fb;'>self</span>.FP() <b><span style='color:#0000ff;'>-</span></b> Sum(<span style='color:#3605fb;'>self</span>.Fcolumn_top.array(<span style='color:#cc0000;'>'*'</span>)) <b><span style='color:#0000ff;'>*</span></b> <span style='color:#cc047c;'>2.205</span> <b><span style='color:#0000ff;'>*</span></b> <span style='color:#cc047c;'>3600</span> <span style='color:#017a31;'># in lb/hr</span>

        eq <b><span style='color:#0000ff;'>=</span></b> <span style='color:#3605fb;'>self</span>.CreateEquation(<span style='color:#cc0000;'>&quot;FS&quot;</span>, <span style='color:#cc0000;'>&quot;&quot;</span>)
        eq.Residual <b><span style='color:#0000ff;'>=</span></b> <span style='color:#3605fb;'>self</span>.FS() <b><span style='color:#0000ff;'>-</span></b> Sum(<span style='color:#3605fb;'>self</span>.Fcolumn_bottom.array(<span style='color:#cc0000;'>'*'</span>)) <b><span style='color:#0000ff;'>*</span></b> <span style='color:#cc047c;'>2.205</span> <b><span style='color:#0000ff;'>*</span></b> <span style='color:#cc047c;'>3600</span> <span style='color:#017a31;'># in lb/hr</span>

        eq <b><span style='color:#0000ff;'>=</span></b> <span style='color:#3605fb;'>self</span>.CreateEquation(<span style='color:#cc0000;'>&quot;FD&quot;</span>, <span style='color:#cc0000;'>&quot;&quot;</span>)
        eq.Residual <b><span style='color:#0000ff;'>=</span></b> <span style='color:#3605fb;'>self</span>.FD() <b><span style='color:#0000ff;'>-</span></b> Sum(<span style='color:#3605fb;'>self</span>.Fsplitter_out.array(<span style='color:#cc0000;'>'*'</span>)) <b><span style='color:#0000ff;'>*</span></b> <span style='color:#cc047c;'>2.205</span> <b><span style='color:#0000ff;'>*</span></b> <span style='color:#cc047c;'>3600</span> <span style='color:#017a31;'># in lb/hr</span>

        eq <b><span style='color:#0000ff;'>=</span></b> <span style='color:#3605fb;'>self</span>.CreateEquation(<span style='color:#cc0000;'>&quot;FL&quot;</span>, <span style='color:#cc0000;'>&quot;&quot;</span>)
        eq.Residual <b><span style='color:#0000ff;'>=</span></b> <span style='color:#3605fb;'>self</span>.FL() <b><span style='color:#0000ff;'>-</span></b> Sum(<span style='color:#3605fb;'>self</span>.Fsplitter_recycle.array(<span style='color:#cc0000;'>'*'</span>)) <b><span style='color:#0000ff;'>*</span></b> <span style='color:#cc047c;'>2.205</span> <b><span style='color:#0000ff;'>*</span></b> <span style='color:#cc047c;'>3600</span> <span style='color:#017a31;'># in lb/hr</span>

        <span style='color:#017a31;'># Ovo mora: total reactor outlet flowrate is sum of components' flowrates</span>
        eq <b><span style='color:#0000ff;'>=</span></b> <span style='color:#3605fb;'>self</span>.CreateEquation(<span style='color:#cc0000;'>&quot;TotalFlowrateFromReactor&quot;</span>, <span style='color:#cc0000;'>&quot;&quot;</span>)
        eq.Residual <b><span style='color:#0000ff;'>=</span></b> Fr_tot <b><span style='color:#0000ff;'>-</span></b> Freactor_total
        
        eq <b><span style='color:#0000ff;'>=</span></b> <span style='color:#3605fb;'>self</span>.CreateEquation(<span style='color:#cc0000;'>&quot;ReactorHoldup&quot;</span>, <span style='color:#cc0000;'>&quot;&quot;</span>)
        eq.Residual <b><span style='color:#0000ff;'>=</span></b> Cr_tot <b><span style='color:#0000ff;'>-</span></b> Cr_total
        
        eq <b><span style='color:#0000ff;'>=</span></b> <span style='color:#3605fb;'>self</span>.CreateEquation(<span style='color:#cc0000;'>&quot;ReactorHoldup&quot;</span>, <span style='color:#cc0000;'>&quot;&quot;</span>)
        eq.Residual <b><span style='color:#0000ff;'>=</span></b> Frecycle_tot <b><span style='color:#0000ff;'>-</span></b> Frecycle_total
        
        <span style='color:#017a31;'># I ovo mora: overall mass balance: inlets - outlets = 0</span>
        eq <b><span style='color:#0000ff;'>=</span></b> <span style='color:#3605fb;'>self</span>.CreateEquation(<span style='color:#cc0000;'>&quot;ReactorHoldup&quot;</span>, <span style='color:#cc0000;'>&quot;&quot;</span>)
        eq.Residual <b><span style='color:#0000ff;'>=</span></b> Freactor_total <b><span style='color:#0000ff;'>-</span></b> (Ffeed_total <b><span style='color:#0000ff;'>+</span></b> Frecycle_tot)

        <span style='color:#017a31;'># Ovo mora: reactor outlet proportional to fractions n the reactor</span>
        <b>for</b> i <b>in</b> <span style='color:#2a00d6;'>range</span>(<span style='color:#3605fb;'>self</span>.Nc.NumberOfPoints<b><span style='color:#0000ff;'>-</span></b><span style='color:#cc047c;'>1</span>):
            eq <b><span style='color:#0000ff;'>=</span></b> <span style='color:#3605fb;'>self</span>.CreateEquation(<span style='color:#cc0000;'>&quot;Freactor(</span><span style='color:#cc0000;'>%d</span><span style='color:#cc0000;'>)&quot;</span> <b><span style='color:#0000ff;'>%</span></b> i, <span style='color:#cc0000;'>&quot;&quot;</span>)
            eq.Residual <b><span style='color:#0000ff;'>=</span></b> Freactor(i) <b><span style='color:#0000ff;'>-</span></b> xr(i) <b><span style='color:#0000ff;'>*</span></b> Freactor_total

        <span style='color:#017a31;'>###########################################################</span><span style='color:#81ca2d;'>###</span>
        <span style='color:#017a31;'># Decanter equations</span>
        <span style='color:#017a31;'>###########################################################</span><span style='color:#81ca2d;'>###</span>
        eq <b><span style='color:#0000ff;'>=</span></b> <span style='color:#3605fb;'>self</span>.CreateEquation(<span style='color:#cc0000;'>&quot;FD&quot;</span>, <span style='color:#cc0000;'>&quot;&quot;</span>)
        i <b><span style='color:#0000ff;'>=</span></b> eq.DistributeOnDomain(<span style='color:#3605fb;'>self</span>.Nc, eClosedClosed)
        eq.Residual <b><span style='color:#0000ff;'>=</span></b> Fdecanter(i) <b><span style='color:#0000ff;'>-</span></b> sf_d(i) <b><span style='color:#0000ff;'>*</span></b> Freactor(i)

        eq <b><span style='color:#0000ff;'>=</span></b> <span style='color:#3605fb;'>self</span>.CreateEquation(<span style='color:#cc0000;'>&quot;FW&quot;</span>, <span style='color:#cc0000;'>&quot;&quot;</span>)
        i <b><span style='color:#0000ff;'>=</span></b> eq.DistributeOnDomain(<span style='color:#3605fb;'>self</span>.Nc, eClosedClosed)
        eq.Residual <b><span style='color:#0000ff;'>=</span></b> Fdecanter_pureG(i) <b><span style='color:#0000ff;'>-</span></b> (<span style='color:#cc047c;'>1</span> <b><span style='color:#0000ff;'>-</span></b> sf_d(i)) <b><span style='color:#0000ff;'>*</span></b> Freactor(i)

        <span style='color:#017a31;'>###########################################################</span><span style='color:#81ca2d;'>###</span>
        <span style='color:#017a31;'># Column equations</span>
        <span style='color:#017a31;'>###########################################################</span><span style='color:#81ca2d;'>###</span>
        eq <b><span style='color:#0000ff;'>=</span></b> <span style='color:#3605fb;'>self</span>.CreateEquation(<span style='color:#cc0000;'>&quot;FB&quot;</span>, <span style='color:#cc0000;'>&quot;&quot;</span>)
        i <b><span style='color:#0000ff;'>=</span></b> eq.DistributeOnDomain(<span style='color:#3605fb;'>self</span>.Nc, [A,B,C,E,G]) <span style='color:#017a31;'># all except component P</span>
        eq.Residual <b><span style='color:#0000ff;'>=</span></b> Fcolumn_bottom(i) <b><span style='color:#0000ff;'>-</span></b> sf_c(i) <b><span style='color:#0000ff;'>*</span></b> Fdecanter(i)

        eq <b><span style='color:#0000ff;'>=</span></b> <span style='color:#3605fb;'>self</span>.CreateEquation(<span style='color:#cc0000;'>&quot;FB_P&quot;</span>, <span style='color:#cc0000;'>&quot;&quot;</span>)
        eq.Residual <b><span style='color:#0000ff;'>=</span></b> Fcolumn_bottom(P) <b><span style='color:#0000ff;'>-</span></b> sf_c(P) <b><span style='color:#0000ff;'>*</span></b> Fdecanter(E)

        eq <b><span style='color:#0000ff;'>=</span></b> <span style='color:#3605fb;'>self</span>.CreateEquation(<span style='color:#cc0000;'>&quot;FT&quot;</span>, <span style='color:#cc0000;'>&quot;&quot;</span>)
        i <b><span style='color:#0000ff;'>=</span></b> eq.DistributeOnDomain(<span style='color:#3605fb;'>self</span>.Nc, [A,B,C,E,G])
        eq.Residual <b><span style='color:#0000ff;'>=</span></b> Fcolumn_top(i) <b><span style='color:#0000ff;'>-</span></b> (<span style='color:#cc047c;'>1</span> <b><span style='color:#0000ff;'>-</span></b> sf_c(i)) <b><span style='color:#0000ff;'>*</span></b> Fdecanter(i)

        eq <b><span style='color:#0000ff;'>=</span></b> <span style='color:#3605fb;'>self</span>.CreateEquation(<span style='color:#cc0000;'>&quot;FT_P&quot;</span>, <span style='color:#cc0000;'>&quot;&quot;</span>)
        eq.Residual <b><span style='color:#0000ff;'>=</span></b> Fcolumn_top(P) <b><span style='color:#0000ff;'>-</span></b> (Fdecanter(P) <b><span style='color:#0000ff;'>-</span></b> sf_c(P) <b><span style='color:#0000ff;'>*</span></b> Fdecanter(E))
        
        <span style='color:#017a31;'>###########################################################</span><span style='color:#81ca2d;'>###</span>
        <span style='color:#017a31;'># Splitter equations</span>
        <span style='color:#017a31;'>###########################################################</span><span style='color:#81ca2d;'>###</span>
        eq <b><span style='color:#0000ff;'>=</span></b> <span style='color:#3605fb;'>self</span>.CreateEquation(<span style='color:#cc0000;'>&quot;Fsplitter_out&quot;</span>, <span style='color:#cc0000;'>&quot;&quot;</span>)
        i <b><span style='color:#0000ff;'>=</span></b> eq.DistributeOnDomain(<span style='color:#3605fb;'>self</span>.Nc, eClosedClosed)
        eq.Residual <b><span style='color:#0000ff;'>=</span></b> Fsplitter_out(i) <b><span style='color:#0000ff;'>-</span></b> sf_s <b><span style='color:#0000ff;'>*</span></b> Fcolumn_bottom(i)

        eq <b><span style='color:#0000ff;'>=</span></b> <span style='color:#3605fb;'>self</span>.CreateEquation(<span style='color:#cc0000;'>&quot;Frecycle&quot;</span>, <span style='color:#cc0000;'>&quot;&quot;</span>)
        i <b><span style='color:#0000ff;'>=</span></b> eq.DistributeOnDomain(<span style='color:#3605fb;'>self</span>.Nc, eClosedClosed)
        eq.Residual <b><span style='color:#0000ff;'>=</span></b> Fsplitter_recycle(i) <b><span style='color:#0000ff;'>-</span></b> (<span style='color:#cc047c;'>1</span> <b><span style='color:#0000ff;'>-</span></b> sf_s) <b><span style='color:#0000ff;'>*</span></b> Fcolumn_bottom(i)

<b>class</b> simTutorial(daeSimulation):
    <b>def</b> <b><span style='color:#000e52;'>__init__</span></b>(<span style='color:#3605fb;'>self</span>):
        daeSimulation.<b><span style='color:#000e52;'>__init__</span></b>(<span style='color:#3605fb;'>self</span>)
        <span style='color:#3605fb;'>self</span>.m <b><span style='color:#0000ff;'>=</span></b> modTutorial(<span style='color:#cc0000;'>&quot;tutorial_che_10&quot;</span>)
        <span style='color:#3605fb;'>self</span>.m.Description <b><span style='color:#0000ff;'>=</span></b> __doc__

    <b>def</b> SetUpParametersAndDomains(<span style='color:#3605fb;'>self</span>):
        <span style='color:#3605fb;'>self</span>.m.Nc.CreateArray(<span style='color:#cc047c;'>6</span>)
        
        <span style='color:#3605fb;'>self</span>.rho <b><span style='color:#0000ff;'>=</span></b> <span style='color:#cc047c;'>800</span> <b><span style='color:#0000ff;'>*</span></b> (kg<b><span style='color:#0000ff;'>/</span></b>m<b><span style='color:#0000ff;'>**</span></b><span style='color:#cc047c;'>3</span>)
        <span style='color:#3605fb;'>self</span>.V   <b><span style='color:#0000ff;'>=</span></b> <span style='color:#cc047c;'>2.5</span> <b><span style='color:#0000ff;'>*</span></b> (m<b><span style='color:#0000ff;'>**</span></b><span style='color:#cc047c;'>3</span>)
        
        <span style='color:#3605fb;'>self</span>.m.k10.SetValue(<span style='color:#cc047c;'>5.9975e09</span> <b><span style='color:#0000ff;'>*</span></b> <span style='color:#cc047c;'>1</span><b><span style='color:#0000ff;'>/</span></b>hour)
        <span style='color:#3605fb;'>self</span>.m.k20.SetValue(<span style='color:#cc047c;'>2.5962e12</span> <b><span style='color:#0000ff;'>*</span></b> <span style='color:#cc047c;'>1</span><b><span style='color:#0000ff;'>/</span></b>hour)
        <span style='color:#3605fb;'>self</span>.m.k30.SetValue(<span style='color:#cc047c;'>9.6283e15</span> <b><span style='color:#0000ff;'>*</span></b> <span style='color:#cc047c;'>1</span><b><span style='color:#0000ff;'>/</span></b>hour)
        <span style='color:#3605fb;'>self</span>.m.E1.SetValue(<span style='color:#cc047c;'>12000</span> <b><span style='color:#0000ff;'>*</span></b> K)
        <span style='color:#3605fb;'>self</span>.m.E2.SetValue(<span style='color:#cc047c;'>15000</span> <b><span style='color:#0000ff;'>*</span></b> K)
        <span style='color:#3605fb;'>self</span>.m.E3.SetValue(<span style='color:#cc047c;'>20000</span> <b><span style='color:#0000ff;'>*</span></b> K)
        <span style='color:#3605fb;'>self</span>.m.rho.SetValue(<span style='color:#3605fb;'>self</span>.rho)
        <span style='color:#3605fb;'>self</span>.m.sf_d.SetValues(numpy.array([<span style='color:#cc047c;'>1.0</span>, <span style='color:#cc047c;'>1.0</span>, <span style='color:#cc047c;'>1.0</span>, <span style='color:#cc047c;'>1.0</span>, <span style='color:#cc047c;'>1.0</span>, <span style='color:#cc047c;'>0.0</span>]))
        <span style='color:#3605fb;'>self</span>.m.sf_c.SetValues(numpy.array([<span style='color:#cc047c;'>1.0</span>, <span style='color:#cc047c;'>1.0</span>, <span style='color:#cc047c;'>1.0</span>, <span style='color:#cc047c;'>0.1</span>, <span style='color:#cc047c;'>1.0</span>, <span style='color:#cc047c;'>1.0</span>]))
        <span style='color:#3605fb;'>self</span>.m.sf_s.SetValue(<span style='color:#cc047c;'>0.1</span>)

    <b>def</b> SetUpVariables(<span style='color:#3605fb;'>self</span>):
        rho <b><span style='color:#0000ff;'>=</span></b> <span style='color:#3605fb;'>self</span>.rho.value
        
        <span style='color:#3605fb;'>self</span>.m.V.AssignValue(<span style='color:#3605fb;'>self</span>.V)
        <span style='color:#3605fb;'>self</span>.m.T.AssignValue(<span style='color:#cc047c;'>675</span> <b><span style='color:#0000ff;'>*</span></b> K)
        Ffeed_A <b><span style='color:#0000ff;'>=</span></b> <span style='color:#cc047c;'>14500</span> <b><span style='color:#0000ff;'>/</span></b> (<span style='color:#cc047c;'>2.205</span><b><span style='color:#0000ff;'>*</span></b><span style='color:#cc047c;'>3600</span>) <span style='color:#017a31;'># convert from lb/hr to kg/s</span>
        Ffeed_B <b><span style='color:#0000ff;'>=</span></b> <span style='color:#cc047c;'>33350</span> <b><span style='color:#0000ff;'>/</span></b> (<span style='color:#cc047c;'>2.205</span><b><span style='color:#0000ff;'>*</span></b><span style='color:#cc047c;'>3600</span>) <span style='color:#017a31;'># convert from lb/hr to kg/s</span>
        Ffeed <b><span style='color:#0000ff;'>=</span></b> Ffeed_A <b><span style='color:#0000ff;'>+</span></b> Ffeed_B
        Ca0 <b><span style='color:#0000ff;'>=</span></b> rho<b><span style='color:#0000ff;'>*</span></b>Ffeed_A <b><span style='color:#0000ff;'>/</span></b> Ffeed
        Cb0 <b><span style='color:#0000ff;'>=</span></b> rho<b><span style='color:#0000ff;'>*</span></b>Ffeed_B <b><span style='color:#0000ff;'>/</span></b> Ffeed
        <span style='color:#2a00d6;'>print</span>(Ffeed_A, Ffeed_B)
        <span style='color:#2a00d6;'>print</span>(Ca0, Cb0)
        <span style='color:#3605fb;'>self</span>.m.Ffeed.AssignValues(numpy.array([Ffeed_A, Ffeed_B, <span style='color:#cc047c;'>0</span>, <span style='color:#cc047c;'>0</span>, <span style='color:#cc047c;'>0</span>, <span style='color:#cc047c;'>0</span>]))
        <span style='color:#3605fb;'>self</span>.m.Cr.SetInitialConditions(numpy.array([Ca0, Cb0, <span style='color:#cc047c;'>0.0</span>, <span style='color:#cc047c;'>0.0</span>, <span style='color:#cc047c;'>0.0</span>, <span style='color:#cc047c;'>0.0</span>]))

<b>def</b> run(<b><span style='color:#0000ff;'>**</span></b>kwargs):
    simulation <b><span style='color:#0000ff;'>=</span></b> simTutorial()
    daeActivity.simulate(simulation, reportingInterval <b><span style='color:#0000ff;'>=</span></b> <span style='color:#cc047c;'>10</span><b><span style='color:#0000ff;'>*</span></b><span style='color:#cc047c;'>60</span>,   <span style='color:#017a31;'># 10 min     </span>
                                     timeHorizon       <b><span style='color:#0000ff;'>=</span></b> <span style='color:#cc047c;'>5</span><b><span style='color:#0000ff;'>*</span></b><span style='color:#cc047c;'>60</span><b><span style='color:#0000ff;'>*</span></b><span style='color:#cc047c;'>60</span>, <span style='color:#017a31;'># 50 h</span>
                                     <b><span style='color:#0000ff;'>**</span></b>kwargs)

<b>if</b> <span style='color:#3605fb;'>__name__</span> <b><span style='color:#0000ff;'>==</span></b> <span style='color:#cc0000;'>&quot;__main__&quot;</span>:
    guiRun <b><span style='color:#0000ff;'>=</span></b> <span style='color:#3605fb;'>False</span> <b>if</b> (<span style='color:#2a00d6;'>len</span>(sys.argv) <b><span style='color:#0000ff;'>&gt;</span></b> <span style='color:#cc047c;'>1</span> <b>and</b> sys.argv[<span style='color:#cc047c;'>1</span>] <b><span style='color:#0000ff;'>==</span></b> <span style='color:#cc0000;'>'console'</span>) <b>else</b> <span style='color:#3605fb;'>True</span>
    run(guiRun <b><span style='color:#0000ff;'>=</span></b> guiRun)</pre>
</body>
</html>
